if("undefined"!==typeof _izooto)throw Error("Duplicate Pixel Found !!");var Izooto=function(g){var a=this;a.throwError=function(b){throw Error(b);};a.log=function(b){1==a.debug&&console.log(b)};a.checkAlternates=function(){"object"!==typeof window._izAlternate?a.log("No alternate implementations found"):(void 0!=window._izAlternate.initAlt&&"function"==typeof window._izAlternate.initAlt&&window._izAlternate.initAlt(),Object.keys(_izAlternate).map(function(b,c){Object.keys(a).map(function(d,e){d===b&&(a[d]=_izAlternate[b])})}))};a.checkBrowser=function(){var b=navigator.userAgent.toLowerCase();parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);var c="",d,e;if(-1!=(d=b.indexOf("opr/"))){var f="Opera";var h=b.substring(d+4)}else-1!=(d=b.indexOf("opera"))?(f="Opera",h=b.substring(d+6),-1!=(d=b.indexOf("version"))&&(h=b.substring(d+8))):-1!=(d=b.indexOf("edge/"))?(f="Edge",h=b.substring(d+5)):-1!=(d=b.indexOf("edga/"))?(f="Edge",h=b.substring(d+5)):-1!=(d=b.indexOf("edgios/"))?(f="Edge",h=b.substring(d+7)):-1!=(d=b.indexOf("edg/"))?(f="Edge",h=b.substring(d+4)):-1!=(d=b.indexOf("ucbrowser"))?(f="Ucb",h=b.substring(d+10)):-1!=(d=b.indexOf("msie"))?(f="Microsoft Internet Explorer",h=b.substring(d+5)):-1!=(d=b.indexOf("crios"))?(f="Other",b.substring(d+6),h=c="40"):-1!=(d=b.indexOf("chrome"))?(f="Chrome",h=b.substring(d+7),/(.*?)wv\)/.test(b)&&(f="Other",h=c="41")):-1!=(d=b.indexOf("safari"))&&(/mac/.test(b)||/ipad|iphone|ipod/.test(b))?(f="Safari",h=b.substring(d+7),-1!=(d=b.indexOf("version"))&&(h=b.substring(d+8))):-1!=(d=b.indexOf("firefox"))?(f="Firefox",h=b.substring(d+8)):(f="Other",h="1");-1!=(e=h.indexOf(";"))&&(h=h.substring(0,e));-1!=(e=h.indexOf(" "))&&(h=h.substring(0,e));b=parseInt(""+h,10);isNaN(b)&&(h=""+parseFloat(navigator.appVersion),b=parseInt(navigator.appVersion,10));if("40"==c||"41"==c)b=c;return f+"-"+b+"-"+h};a.checkIfSafari=function(){if(1!=a.deviceType)return 0;var b=a.checkBrowser().split("-");return"Safari"==b[0]&&7<=b[1]?1:0};a.incog=function(b){var c=window.RequestFileSystem||window.webkitRequestFileSystem;if(c)return c(window.TEMPORARY,100,function(d){b(!1)},function(d){b(!0)});b(!1)};a.checkIfChrome=function(){var b=a.checkBrowser().split("-");return"Chrome"==b[0]&&42<=b[1]?1:0};a.checkIfFirefox=function(){var b=a.checkBrowser().split("-");return 1!=a.deviceType&&"Firefox"==b[0]&&48<=b[1]?1:"Firefox"==b[0]&&44<=b[1]?1:0};a.checkIfUcb=function(){return"Ucb"==a.checkBrowser().split("-")[0]?1:0};a.checkIfOpera=function(){return"Opera"==a.checkBrowser().split("-")[0]?1:0};a.checkIfEdge=function(){return"Edge"==a.checkBrowser().split("-")[0]?1:0};a.checkForFcm=function(){var b=a.checkBrowser().split("-");return a.isUcb&&12<=b[1]||a.isOpera&&42<=b[1]||1==a.isEdge&&17<=b[1]?1:0};a.urlB64ToUint8Array=function(b){var c="=".repeat((4-b.length%4)%4);b=(b+c).replace(/\-/g,"+").replace(/_/g,"/");b=window.atob(b);c=new Uint8Array(b.length);for(var d=0;d<b.length;++d)c[d]=b.charCodeAt(d);return c};a.izParseQuery=function(b){var c={};b=("?"===b[0]?b.substr(1):b).split("&");for(var d=0;d<b.length;d++){var e=b[d].split("=");c[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return c};a.checkSubDomain=function(){var b=window.location.href;b=b.substr(b.lastIndexOf("?")+1);-1!==b.indexOf("action=prompt")?(b=1,a.overridePromptType()):b=-1!==b.indexOf("action=izrmsubs")?2:-1!==b.indexOf("action=izcheckmaster")?3:"action=izcheckperms"==b?4:-1!==b.indexOf("action=izvalidator&izObj=")?5:0;return b};a.getParamFromUrl=function(b,c){var d="";try{d=new URL(b),d=d.searchParams.get(c)}catch(e){}return d};a.isTablet=function(b){if(/android/.test(b)){if(!1===/mobile/.test(b))return!0}else if(!0===/ipad/.test(b))return!0;return!1};a.isMobile=function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||window.opera).substr(0,4))};a.getDevice=function(){var b=navigator.userAgent;b=b.toLowerCase();return a.isTablet(b)?2:a.isMobile()?3:1};a.getOS=function(){var b=navigator.userAgent.toLowerCase();return/windows phone/i.test(b)?6:/android/i.test(b)?4:/ipad|iphone|ipod/.test(b)&&!window.MSStream?5:/linux/i.test(b)?2:/macintosh|mac os x/i.test(b)?3:/windows|win32/i.test(b)?1:7};a.detectPlatform=function(){var b="";1==window.is_wp?b="wordpress":1==a.isShopify?b="shopify":void 0!=window._izootoModule&&1==window._izootoModule.isMagento?b="magento":void 0!=window._izootoModule&&1==window._izootoModule.isOpencart&&(b="opencart");return b};a.getBrowser=function(){var b=a.checkBrowser().split("-"),c=b[2];return"Chrome"==b[0]?[1,c]:"Safari"==b[0]?[2,c]:"Firefox"==b[0]?[3,c]:"Opera"==b[0]?[4,c]:"Ucb"==b[0]?[6,c]:"Edge"==b[0]?[7,c]:[5,c]};a.activePrompt=function(){if("http:"===a.locationProtocol||"https:"===a.locationProtocol&&1!=a.isSdkHttps&&1!=a.isSubDomain)try{window.addEventListener("beforeunload",function(b){a.removeStorage("izpt");document.cookie="izpt=1;path=/;"+a.cDomain+"max-age=-30000;"+a.cSameSite}),a.cookieLess?a.setStorageWithTime("izpt",1):document.cookie="izpt=1;path=/;"+a.cDomain+"max-age=300;"+a.cSameSite}catch(b){}};a.getSessionId=function(){return"iz-"+Math.random().toString(36).substr(2,16)+(65536*(1+Math.random())|0).toString(16).substring(1)};a.setSession=function(){return a.getSessionId()};a.setCookieGlobalID=function(){if(1==a.izootoStatus)try{iframe=document.createElement("IFRAME"),iframe.setAttribute("src","https://cdn.izooto.com/scripts/sak/iz_setcid.html"),iframe.style.width="0px",iframe.style.height="0px",iframe.style.border="0px",iframe.setAttribute("visibility","hidden"),iframe.setAttribute("id","izsetcgid"),iframe.style.display="none",null!=document.body?document.body.appendChild(iframe):document.head.appendChild(iframe),setTimeout(function(){try{document.body.removeChild(iframe)}catch(b){a.log("izooto:: unable to set cookieGlobalID "+b)}},2500)}catch(b){a.log("izooto:: unable to set cookieGlobalID "+
b)}};a.setEnrPixel=function(){if(1==a.izootoStatus){var b=a.getIzSync("evt");if(!(""!=b&&10080>a.getTimeDiff(b)))try{b="";b=(new Date).getTimezoneOffset();var c="pid="+a.client+"&btype="+a.browser+"&dtype="+a.deviceType+"&tz="+(b+330)+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam;iframe=document.createElement("IFRAME");iframe.setAttribute("src",a.setEnrUrl+"?"+c);iframe.style.width="0px";iframe.style.height="0px";iframe.style.border="0px";iframe.setAttribute("visibility","hidden");iframe.style.display="none";iframe.onload=function(){a.setIzSync("evt")};null!=document.body?document.body.appendChild(iframe):document.head.appendChild(iframe)}catch(d){a.log("izooto:: unable to set ENR "+d)}}};a.getizlocal=function(b,c){var d={},e="";if(""!=b)try{d=JSON.parse(b)}catch(f){}void 0!=d[c]&&(e=d[c]);return e};a.getIndexDBData=function(b,c,d){return new Promise(function(e,f){var h=b.transaction([c]).objectStore(c),k="all"==d?h.getAll():h.get(d);k.onerror=function(l){f("Unable to retrieve data from db!")};k.onsuccess=function(l){l="";k.result?l=k.result:a.log("Not found in db! "+c+"::"+d);e(l)}})};a.tblExtract=function(b,c,d){for(var e in b)if(b[e].hasOwnProperty(c)&&b[e][c]==d)return b[e];return{}};a.getswVersionPromise=function(){return new Promise(function(b,c){a.db.init().then(function(d){a.getIndexDBData(d,"options","swVer").then(function(e){var f=e.val;e.hasOwnProperty("key")?b(f):c(!1)})["catch"](function(e){a.log(e);c(!1)})})["catch"](function(d){a.log(d);c(!1)})})};a.setizlocal=function(b,c,d,e,f){var h=Math.round((new Date).getTime()/1E3),k={};if(""!=e)try{k=JSON.parse(e)}catch(l){}k[c]=void 0!=d&&""!=d?d:h;void 0!=f&&!0===f&&delete k[c];a.isLocalStorage&&localStorage.setItem(b,JSON.stringify(k))};a.setizConfig=function(b,c,d){d=a.getStorage("izConf");a.setizlocal("izConf",b,c,d)};a.getizConfig=function(b){var c=a.getStorage("izConf");return a.getizlocal(c,b)};a.getApihcStorage=function(b,c){var d="",e=a.getizConfig("iz_apihc");return""!=e&&(d=JSON.parse(e),d=void 0!=d[b]?d[b]:0,0!=d&&!1!==c)?(e=d.split("#"),d=e[1],e=e[0],"counter"==c?d:e):d};a.setApihcStorage=function(b,c,d,e){var f=a.getStorage("izConf");var h=a.getizConfig("iz_apihc"),k={};if(""!=f)try{JSON.parse(f)}catch(n){}if(""!=h){try{k=JSON.parse(h)}catch(n){}if(k.hasOwnProperty(b))if(f=a.getApihcStorage(b,!1),""!=f){var l=f.split("#"),m=l[1];f=d!=l[0]?!1:!0}else f=!1;else f=!1;switch(c){case "INCRCount":k[b]=f?l[0]+"#"+(parseInt(m)+1):d+"#1";break;case "resetTime":k[b]=f?d+"#"+m:d+"#"+e;break;case "resetCount":k[b]=f?l[0]+"#"+e:d+"#"+e;break;case "INCRTime":f&&(k[b]=parseInt(l[0])+1+"#"+m),k[b]=d+"#1"}}else k[b]=d+"#1";a.setizConfig("iz_apihc",JSON.stringify(k))};a.getIzSync=function(b){var c=a.getStorage("izSync");return a.getizlocal(c,b)};a.setIzSync=function(b,c,d){var e=a.getStorage("izSync");a.setizlocal("izSync",b,c,e,d)};a.getTimeDiff=function(b,c){var d=b-(new Date).getTime()/1E3;if(void 0==c||0==c)d/=60;return Math.abs(Math.round(d))};a.setCookie=function(b,c){var d=new Date;d.setTime(d.getTime()+1296E8);d="expires="+d.toUTCString();document.cookie=b+"="+c+";path=/;"+a.cDomain+d+";"+a.cSameSite};a.removeStorage=function(b){"iztoken"==b&&(b=a.tokenCookie);document.cookie=b+"=1;path=/;expires=Thu, 2 Aug 1991 20:47:11 UTC;;"+a.cSameSite;""!=a.cDomain&&(document.cookie=b+"=1;path=/;"+a.cDomain+"expires=Thu, 2 Aug 1991 20:47:11 UTC;;"+a.cSameSite);localStorage.removeItem(b)};a.getCookie=function(b){try{b+="=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return""}catch(f){}};a.setStorageWithTime=function(b,c,d){"undefined"==d&&(d=60*a.repeatPromptDelay);d={izstatus:a.tokenExpire,izpt:300,izDl:d};if(void 0!=d[b]){var e=new Date;d=e.setTime(e.getTime()+1E3*d[b]);c={v:c,t:d};c=encodeURIComponent(JSON.stringify(c));localStorage.setItem(b,c)}else localStorage.setItem(b,c)};a.getStorageWithTime=function(b,c,d){if(void 0==d.t||""==d.t||isNaN(d.t))return c;c=new Date;c.setTime(c.getTime());if(0<(d.t-c)/1E3)return void 0!=d.v?d.v:"";a.removeStorage(b);return""};a.setStorage=function(b,c){"iztoken"==b&&(b=a.tokenCookie);c=encodeURIComponent(c);a.cookieLess?b!=a.tokenCookie?a.setStorageWithTime(b,c):a.isLocalStorage&&localStorage.setItem(b,c):(a.isLocalStorage&&localStorage.setItem(b,c),a.setCookie(b,c))};a.getStorage=function(b){if("iztoken"==b)return b=a.tokenCookie,null===localStorage.getItem(b)?a.getCookie(b):decodeURIComponent(localStorage.getItem(b))||a.getCookie(b)?decodeURIComponent(localStorage.getItem(b))||a.getCookie(b):"";var c="";try{c=localStorage.getItem(b),c=null===c?"":decodeURIComponent(c)}catch(f){c=""}if(""==c)return a.getCookie(b);try{var d=JSON.parse(c),e=a.getStorageWithTime(b,c,d);return""!=e?e:a.getCookie(b)}catch(f){}return c};a.loadDesign=function(b,c){if("object"!==typeof b)return"";for(var d in b)b.hasOwnProperty(d)&&(c=c.replace(new RegExp("{{--"+d+"--}}","g"),b[d]));return c};a.overridePromptType=function(){var b=window.location.href.substr(window.location.href.lastIndexOf("?")+
1),c=b.indexOf("izpt=");-1!==c&&(b=b.substr(c+5,1),"0"===b||"1"===b||"2"===b)&&(a.promptType=Number.parseInt(b))};a.detectAutoPrompt=function(){var b=!0;if("[object Array]"===Object.prototype.toString.call(window._izq)){for(var c=0;c<window._izq.length;c++){var d=window._izq[c];if("[object Array]"===Object.prototype.toString.call(d))for(var e=0;e<d.length;e++){var f=d[e];"[object Object]"===Object.prototype.toString.call(f)&&f.hasOwnProperty("auto_prompt")&&(b=f.auto_prompt)}}a.autoPrompt=!1===b?!1:!0;a.autoPrompt||(a.promptType=2,a.dialogDesign="",a.processQueue())}};a.client=void 0!==g.client?g.client:a.throwError("iZooto:: Configuration parameter not found (client)");a.sourceOrigin=void 0!==g.sourceOrigin?g.sourceOrigin:a.throwError("iZooto:: Configuration parameter not found (sourceOrigin)");a.domainRoot=void 0!==g.domainRoot?g.domainRoot:a.throwError("iZooto:: Configuration parameter not found (domainRoot)");a.isSdkHttps=void 0!==g.isSdkHttps?g.isSdkHttps:a.throwError("iZooto:: Configuration parameter not found (isSdkHttps)");a.manifestName=void 0!==g.manifestName?g.manifestName:a.throwError("iZooto:: Configuration parameter not found (manifestName)");a.serviceWorkerName=void 0!==g.serviceWorkerName?g.serviceWorkerName:a.throwError("iZooto:: Configuration parameter not found (serviceWorkerName)");a.serviceWorkerNameMob=void 0!==g.serviceWorkerNameMob?g.serviceWorkerNameMob:"";a.swScope=void 0!==g.swScope?g.swScope:"";a.webPushId=void 0!==g.webPushId?g.webPushId:"";a.webServiceUrl=void 0!==g.webServiceUrl?g.webServiceUrl:"";a.mobileAllowed=void 0!==g.mobileAllowed?g.mobileAllowed:1;a.desktopAllowed=void 0!==g.desktopAllowed?g.desktopAllowed:1;a.preDomainCheck=void 0!==g.preDomainCheck?g.preDomainCheck:0;a.setEnr=void 0!==g.setEnr?g.setEnr:1;a.izootoStatus=void 0!==g.izootoStatus?g.izootoStatus:1;a.httpsNoRoot=void 0!==g.httpsNoRoot?g.httpsNoRoot:0;a.isShopify=void 0!==g.isShopify?g.isShopify:0;a.cookieLess=void 0!==g.cookieLess?g.cookieLess:1;0!=a.isShopify&&(a.cookieLess=0);a.ga={};a.ga.id=void 0!==g.gaId?g.gaId:"";a.ga.syncCid=void 0!==g.syncGACid?g.syncGACid:0;a.ga.swEvents=void 0!==g.gaSwEvents?g.gaSwEvents:0;a.ga.subscriptionCallback=[];a.ga.promptDisplayCallback=[];a.sourceOriginAlt=void 0!==g.sourceOriginAlt?g.sourceOriginAlt:"";a.fullPopUp=void 0!==g.fullPopUp?g.fullPopUp:0;a.sysEvents=void 0!==g.sysEvents?g.sysEvents:1;a.sysEventsFlag=void 0!==g.sysEvents?1:0;a.masterDomain=void 0!==g.masterDomain?g.masterDomain:"";a.masterDomainPath=void 0!==g.masterDomainPath?g.masterDomainPath:"";a.isSubDomain=a.checkSubDomain();a.isReSubscribe=0;a.isMsgReciever=0;a.locationPrompt=void 0!==g.locationPrompt?g.locationPrompt:0;a.debug=void 0!==g.debug?g.debug:0;a.locationProtocol=document.location.protocol;a.setEnrUrl=a.locationProtocol+"//evt.izooto.com/index.php";a.sendEnrUrl=a.locationProtocol+"//evt.izooto.com/api.php";a.ssUrl=a.locationProtocol+"//ss.izooto.com/ss.php";a.shopifyApi="https://events.izooto.com/shopifywh1.php";a.promptDelay=void 0!==g.promptDelay?g.promptDelay:0;a.optInCloseDelay=void 0!==g.optInCloseDelay?g.optInCloseDelay:60;a.repeatPromptDelay=void 0!==g.repeatPromptDelay?g.repeatPromptDelay:0;a.tokenExpire=void 0!==g.tokenExpire?g.tokenExpire:86400;a.allowedDomain=void 0!==g.allowedDomain?g.allowedDomain:"";a.allowedKeys=["bookingurl","landingurl"];a.cDomain=void 0!==g.cDomain?g.cDomain:"";a.cSameSite="SameSite=Lax;";a.tokenFilter=void 0!==g.tokenFilter?g.tokenFilter:0;a.izTags=void 0!==g.tagsEnabled?g.tagsEnabled:0;a.izTagLink=a.locationProtocol+"//events.izooto.com/tags.php";a.supURL=a.locationProtocol+"//evt.izooto.com/sup.php";a.eventsURL="https://events.izooto.com/ev.php?p=p";a.persURL="https://pers.izooto.com/pp?p=p";a.sysEventUrl="https://ev.izooto.com/sp.php?p=p";a.hidePopup=void 0!==g.hidePopup?g.hidePopup:!0;a.bkey=0;a.bkeySent=0;a.pluginStatus=0;a.autoPrompt=!0;a.calledManually=!1;a.deviceType=a.getDevice();a.browserArr=a.getBrowser();a.browser=a.browserArr[0];a.browserVer=a.browserArr[1];a.os=a.getOS();a.isLocalStorage="localStorage"in window&&null!==window.localStorage;a.isSafari=a.checkIfSafari();a.isChrome=a.checkIfChrome();a.isFirefox=a.checkIfFirefox();a.isUcb=a.checkIfUcb();a.isOpera=a.checkIfOpera();a.isEdge=a.checkIfEdge();a.fcmEnable=void 0!==g.fcmEnable?g.fcmEnable:0;a.vapid=void 0!==g.vapidPublicKey&&""!==g.vapidPublicKey?g.vapidPublicKey:"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";a.subType=0;a.isAddFcm=a.checkForFcm();a.sentShopifyProduct=0;if(a.fcmEnable||1==a.isAddFcm)a.subType=1;void 0!==g.vapidPublicKey&&""!==g.vapidPublicKey&&(a.fcmEnable=0,a.subType=2);a.isSafari&&(a.subType=3);a.sak="https://cdn.izooto.com/scripts/sak/";a.swversion="";a.optObj={userVisibleOnly:!0,applicationServerKey:a.urlB64ToUint8Array(a.vapid)};a.gcmToVapidMigrate=void 0!==g.gcmToVapidMigrate?g.gcmToVapidMigrate:1;a.tokenGen=void 0!==g.tokenGen?g.tokenGen:0;1==a.isAddFcm&&(1==a.subType||a.isUcb?a.fcmEnable=1:(a.fcmEnable=0,a.tokenGen=0));a.optObj=a.fcmEnable||2==a.subType?{userVisibleOnly:!0,applicationServerKey:a.urlB64ToUint8Array(a.vapid)}:{userVisibleOnly:!0};a.unid=a.setSession();a.httpContentLoaded=0;a.incognitoChecked=0;a.syncNotificationView=void 0!==g.syncNotificationView?g.syncNotificationView:"";a.syncNotificationClick=void 0!==g.syncNotificationClick?g.syncNotificationClick:"";a.iconWhite=void 0!=g.poweredByIcon&&0===g.poweredByIcon?"":'<img class="izbranding" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAPCAMAAAAMJKc9AAAAjVBMVEUAAACKiIiKiIiKiIiKiIiKiIiSjoKKiIiKiIiKiIiKiIj//vWKiIiKiIiKiIj///////////////////+KiIj///////////////////////////r////////////////////////////////////////////41h342CX30QP42Sz///+KiIj42i730gTHrF7KAAAAK3RSTlMAd+4i3WYQzJkzVQW7qkSSZ1wQpYh8HIZx7jwt+dHFrE/gup5DNyQ+2Y1xoV/zZQAAAkdJREFUSMfdk+tymzAQhY9k7hhs7hhsE+NL2u6m7/943cVpTeN2phmnM51+PwRIMPo4u8L/S/OER1iwkuCPCJYQDAv+AncQrR9TWQChdd+j4gCe/wv7LdFYP6iCpdF/9cOQPfgWsFHqsE3hWsuhmTLwlmz9VxUdfI9DkZuM2IVCwjbDlUuR5U8T5/eopNZ1OUXgeDbymBdiZAO4vHA5QsqurKB0FqGdpRIhKdUZN84bEsYcSkW7jq7gLf0q/22vlEgSwOMoKUPrRCaJJB44xmWg9PWt0DFAcusVNogcRNbDjHwgYXOCEDc9snXWbqlSy9NlmuxOWsEdrWKg7rr4LhVhGUxBG9/4SemLgzKpBKxoNjC3AgXiasMkwM+sSdEd+n0DoaA9UB9k8vgaW4WVjAVaLefpXuV7Kh4vS+NwGFkoUyoJFN/M2xapfFcGNnpjsidhryotbQA0dIgRb6hoD1TFRKt2Q1m/o6HviNqK6HSvMvWKxO1zFLID7ZWUI1XRPAx7Zt4rYiVDyBZz6j0pzWs+O0D2OwNPenumQ0UDcBLFI2UYaa2ZHe9VricIKDkElyLgaDuoiq7YFLidIBb0XYgvZidoS8Ku936oxFvKptsCyOkwUCu+tMUg0zvqgUpWPoRUkpyjxW/w/PVTPO2/x0j7vL7kF6IuX9HY0abPjzRKKitUuiZVw0cQsMEblSIHPr+8XFXGNV1BS0qNgoRNjJ4ow4GEIcZfoc0geF+eIdRNd1lNVEB2HJqL+sk1hzw3NeKqKFr8e3wDHdZCDjBsROUAAAAASUVORK5CYII=" style="vertical-align: middle !important; padding-right: 3px !important;">';a.iconBlue='<img class="izbranding" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAAAPCAMAAAAMJKc9AAAAb1BMVEUAAACKiIiKiIiKiIgNUqANUqAMUaELUKGKiIiKiIiKiIiKiIiKiIgLUKKKiIgNUqAMUaEMUaCKiIiKiIiKiIgNUqCKiIgNUqANUqAMUqAMUKKKiIgNUqAMUqANUqD32yn/9xD67Bv63yUMUqCKiIg7jdR8AAAAI3RSTlMAd+4iyeGrat1mzJkzIBGML/RVu6qZREMKFLmIX1B8+HVcPEBtRIgAAAJSSURBVEjH3ZTpbtswEISHtO6Lkqz7sJNw3/8Zu0sathK3QAP3R5EBJHKxOj6NhsSPVRBNeEUnEnX4K+VnOStiZaenrrXh+Kim+vso/MxCp99BSYAqe6a3LHMnCe02Bk7LjmdNf0DBWcm3ZkVBFTIN6HZISA9ItaZCOQ+qM+nsjgKVVVQwnCMi9yWhsAQ3M2ZrL8Z6RXjS3IS/Rxl0mtKAPKl0WxGdmEjnSOmUUouBUu5gTU6FPrjSoluF+fD4yIpiX409pm3b9tA2JZuwxyNE5bYJ7Gat1PPuqmNWVnQdUFHbrYVOWtW1bA8SlRKwZnJVkSige2SFFNoEra5wUOyM8ek1y+iIGnnnKI2AkYx3KZahR9zwsEwHV0Tn3BmtMpV1a8YMIoeSu6l4A/X4QTmz6qLL8Unj3ZeS38FDzfFxRRjxIWYEC/+6OuDJXvtq+YJyc6Wi86oSKloNkXPFBzRTx9hi4PvWXLc4Kg6EpKk9SuTyE/C5t+EkmFtgF+eMRGlyTTHoC4rLiubQUltQAsnKQK2giB+KKvUpK5IeFKRxUL1Y0VLijhLZRuwPbO+xQru71iwHGuffE4pfQewBFaCVARIixYC+owfgsYKI/LVgXjxWUHNMbekj0cxSLDaQRWNNYI3zYaoFoBHakWeva6DhUDmUqMTb2w3F1ByPizGmrLkhkcaFcxI3DFbfwmu4CvGyclJfd1u2//16fff7Stzf95WLG7nrwhTObhMqEd2i9c8V9ZKLj+v1Q6rxgrp3MjVXJrq4DG19FDvXjAw7VzP+L/0Cmos+Ujvzdw8AAAAASUVORK5CYII=">';a.locale="undefined"!==g.locale&&""!==g.locale?g.locale:"en";a.closeMsg=void 0!==g.closeMsg&&""!==g.closeMsg?g.closeMsg:"CLOSE";a.subscribedMsg=void 0!==g.subscribedMsg&&""!==g.subscribedMsg?g.subscribedMsg:"Subscribed";a.alreadySubscribedMsg=void 0!==g.alreadySubscribedMsg&&""!==g.alreadySubscribedMsg?g.alreadySubscribedMsg:"You've already subscribed to notifications.";a.clickOnAllowMsg=void 0!==g.clickOnAllowMsg&&""!==g.clickOnAllowMsg?g.clickOnAllowMsg:"Click On allow to subscribe to notifications";a.blockedMsg=void 0!==g.blockedMsg&&""!==g.blockedMsg?g.blockedMsg:"Blocked";a.alreadyDeniedMsg=void 0!==g.alreadyDeniedMsg&&""!==g.alreadyDeniedMsg?g.alreadyDeniedMsg:"You've blocked notifications from this site.";a.thanksForSubscribingMsg=void 0!==g.thanksForSubscribingMsg&&""!==g.thanksForSubscribingMsg?g.thanksForSubscribingMsg:"Thank you for subscribing to push notifications!";a.tabAbandonment=void 0!==g.tabAbandonment&&""!==g.tabAbandonment?g.tabAbandonment:{};a.tabAbandonment.status=void 0!=a.tabAbandonment.status?a.tabAbandonment.status:0;a.tabAbandonment.timeout=void 0!=a.tabAbandonment.timeout?a.tabAbandonment.timeout:600;a.tabAbandonment.pushTimeout=void 0!=a.tabAbandonment.pushTimeout?a.tabAbandonment.pushTimeout:3600;a.tabAbandonment.data=void 0!==a.tabAbandonment.data&&""!==a.tabAbandonment.data?a.tabAbandonment.data:{};a.tabAbandonment.counter=0;a.siteUrl=void 0!==g.siteUrl?g.siteUrl:"";a.promptType=void 0!==g.promptFlow?g.promptFlow:0;a.promptDesign=void 0!==g.promptDesign?g.promptDesign:{};a.optInDesign=void 0!==g.optInDesign&&""!=g.optInDesign?g.optInDesign:"";a.optInDesignType=void 0!==g.optInDesignType?g.optInDesignType:"";1!=a.deviceType&&(a.promptDesign=void 0!==g.mobPromptDesign?g.mobPromptDesign:a.promptDesign,a.promptType=void 0!==g.mobPromptFlow?g.mobPromptFlow:a.promptType,a.optInDesignType=void 0!==g.mobOptInDesignType?g.mobOptInDesignType:a.optInDesignType,a.promptDelay=void 0!==g.mobPromptDelay?g.mobPromptDelay:a.promptDelay,a.repeatPromptDelay=void 0!==g.mobRepeatPromptDelay?g.mobRepeatPromptDelay:a.repeatPromptDelay,a.optInCloseDelay=void 0!==g.mobOptInCloseDelay?g.mobOptInCloseDelay:a.optInCloseDelay);a.newOptIn=void 0!==g.mobPromptDesign||void 0!==g.mobPromptFlow?1:0;a.optinParam=""!=a.optInDesignType?"&optin="+a.optInDesignType:"";a.promptDesign.poweredbysrc="https://www.izooto.com/getting-started-with-izooto?utm_source=referral&utm_medium=PoweredBy&utm_campaign="+encodeURIComponent(a.siteUrl);a.defaultDialogDesign='<style>.iz_container{text-align: center; display:table-cell; vertical-align:middle;}.iz_overlay{text-shadow: 0px 0px !important;position:fixed;top:0px;left:0px;width:100%;height:100%;background:rgba(0, 0, 0, 0.32); z-index: 9999999;}.iz_content{font-family:arial;position:absolute;top:50%;left:50%;width:25%;transform:translate(-50%,-50%);background:#fff;border-radius:10px 10px 0px 0px;border-radius:10px;text-align: center; display:inline-block;}.iz_btn{margin-left:auto!important; margin-right:auto!important; text-align: center;margin-top: 3%!important; background: #6FCBCF; color: #fff; margin-bottom: 4%!important; padding: 10px!important; border-radius: 4px; width: 140px; border: none; font-size: 13px; letter-spacing: 1px; box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12); transition: all .3s ease-out; cursor: pointer;}.iz_btn:hover{box-shadow:0 5px 11px 0 rgba(0,0,0,0.18),0 4px 15px 0 rgba(0,0,0,0.15);cursor:pointer;}.iz_head_txt{color:white!important;line-height: 24px; font-size: 18px;}.iz_top{padding-bottom: 10px!important;border-radius:10px 10px 0px 0px;background: #5D5D5D; color: #fff; padding: 30px!important;}.iz_txt{margin-top: 15px; font-size: 14px; color: #FF9595;}@media only screen and (max-width: 600px) and (min-height: 300px){.iz_content{background: #fff none repeat scroll 0 0; border-radius: 10px; display: inline-block; left: 50%; position: absolute; text-align: center; top: 50%; transform: translate(-50%, -50%); width: 90%!important;}.iz_head_txt{color:white!important;line-height: 24px;font-size: 120%;}.iz_txt{color: #ff9595; font-size: 100%; margin-top: 15px;}}@media only screen and (max-width: 800px){.iz_content{background: #fff none repeat scroll 0 0; border-radius: 10px; display: inline-block; left: 50%; position: absolute; text-align: center; top: 50%; transform: translate(-EUNITNO50%, -50%); width: 65%;}.iz_head_txt{color:white!important;line-height: 24px; font-size: 120%;}.iz_txt{color: #ff9595; font-size: 100%; margin-top: 15px;}}</style><div class="iz_overlay"> <div class="iz_container"> <div class="iz_content"> <center> <div class="iz_top"> <div class="iz_head_txt">'+
a.thanksForSubscribingMsg+'</div><div style="text-align: right !important;position: absolute !important;    right: 0px !important;margin-top: 5px !important;"><a href="'+a.promptDesign.poweredbysrc+'" target="_blank" style="cursor: pointer !important;">'+a.iconWhite+'</a></div></div><div class="iz_btn" onclick="_izooto.openPopup();">'+a.closeMsg+"</div> </center> </div></div></div>";a.dialogDesign=void 0!==g.dialogDesign&&""!=g.dialogDesign?g.dialogDesign:a.defaultDialogDesign;a.branding=void 0!==g.branding?g.branding:1;a.httpsBranding="<style type='text/css'>.iz-https-branding{position:fixed!important;z-index:2147483646;padding:1px 14px;background:#000;text-align:center;color:#fff;font-family:Arial;font-size:12px;font-weight:400;opacity: .65;top:0!important;right:0!important;border-radius:2px}.iz-https-branding img{padding-left:2px;display:inline-block;vertical-align:middle;max-width:60px!important}.iz-branding-content span{vertical-align:middle;color:#fff}.iz-https-branding:hover{visibility:visible}@media only screen and (max-width: 600px){.iz-https-branding{top:auto !important;right:0px !important;left:0px !important;bottom:28%;width:auto !important}}@media only screen and (max-width: 400px){.iz-https-branding{bottom:33%}}</style><div class='iz-https-branding'><div class='iz-branding-content'><a href='"+
a.promptDesign.poweredbysrc+"' target='_blank' style='text-decoration: none;'><span>Notifications Powered By </span><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAYCAMAAACRH25gAAAATlBMVEUAAAD///////////////////7////////////////////////////////////////////////////////31Bn42Sv42Sz////42Sr20ABMp0RkAAAAF3RSTlMAkxoQhUGtTjMkZ+rgoW7NuVz0eVknb7zWT80AAAEOSURBVDjL7ZHbbsQgDEQBQwjhEpLddrb//6O1jRKlah+q7VPVjhSN7HBsbMwf1W35AQy05+ECrPOzcAYuzaulOaroO/BchC5JAwcEDH1exWK/wOvlsF9MWLa4IhOXCkGTKehcO+IRXDSaaa53ktsAjgsB2MPpme1mLIB8wbcOyTi5ttZIwMZviL0xRxEQd7HApobcmD9QN0E0aTDgjCqblAoTbAd3t/BmBRlIsJ7w2FcwB5wY6GPEJFee9OiGOmBJ1g8wr/Ht8TJgGThQcqZjIlcQPXsq2BiWz1LCCQOdp70/FCZgwVA0eYxDu7osQVqL6vl6Te31ruab81Y1G+enKj+JXR/y5nmZGvzrV+kdgQgTu1UUeUkAAAAASUVORK5CYII=' width='60'></a></div></div>";a.overlay=void 0!==g.overlay?g.overlay:0;a.overlayMessage=void 0!==g.overlayMessage?g.overlayMessage:"Click on 'allow' to subscribe to notifications";a.httpsOverlay="<style>.iz-branding {color:white;font-size: 25px;position:absolute;top:40%; left:28%; z-index: 999999!important; width: 50%!important;}.iz-arrow img{transform: rotate(180deg);}@media screen and (max-width:600px){#izooto_desktop_overlay {display:none; .iz-arrow {width: 100%;position: fixed;top: auto;bottom:35%;left: 65%;border-radius: 0px;}.moz-transfer{width: 100%;position: fixed;top: auto;bottom: 30%;left: 65% !important; border-radius: 0px; }.moz-transfer img{transform: rotate(180deg) !important;}.iz-arrow img {transform: rotate(0deg);}.iz-branding {color:white;font-size: larger;position:fixed;top:40%;left:17%;width:100%}}</style><div id='izooto_desktop_overlay' onclick='_izooto.closeHttpsBranding();' style='z-index: 999999999;position: fixed;height: 100%;top: 0px;left: 0px;width: 100%;background: rgba(0, 0, 0, 0.89);'><div class='izoverlay-container'><div class='iz-branding'><div class='iz-text' style='padding-bottom:5px; font-family:Lato; display: -webkit-box; -webkit-line-clamp: 2; text-overflow: ellipsis; overflow: hidden; word-wrap: break-word; -webkit-box-orient: vertical;'>"+
a.overlayMessage+"</div><div class='iz-powered-text'><a href='"+a.promptDesign.poweredbysrc+"' target='_blank' style='cursor: pointer !important;'>"+a.iconBlue+"</a></div></div></div>";a.isChrome&&(61<parseInt(a.browserVer)||60<parseInt(a.browserVer)&&1!=a.deviceType)&&(0==a.isSdkHttps&&0==a.promptType||a.isSdkHttps&&"http:"==a.locationProtocol||a.isSubDomain)&&(a.promptType=1);a.promptDesign.message=void 0!==a.promptDesign.message?a.promptDesign.message:"Click on allow to subscribe to notifications";a.promptDesign.subMessage=void 0!==a.promptDesign.subMessage?a.promptDesign.subMessage:"Stay updated with the latest happenings on our site";a.promptDesign.icon=void 0!==a.promptDesign.icon?a.promptDesign.icon:"//cdnimg.izooto.com/default/6.png";a.promptDesign.btn1Txt=void 0!==a.promptDesign.btn1Txt?a.promptDesign.btn1Txt:"Later";a.promptDesign.btn2Txt=void 0!==a.promptDesign.btn2Txt?a.promptDesign.btn2Txt:"Allow";a.promptDesign.position=void 0!==a.promptDesign.position?a.promptDesign.position:"right";a.promptDesign.bgColor=void 0!==a.promptDesign.bgColor?a.promptDesign.bgColor:"#1a71db";a.promptMessage=a.promptDesign.message;a.promptSubMessage=a.promptDesign.subMessage;a.promptIcon=a.promptDesign.icon;a.promptBtn1Txt=a.promptDesign.btn1Txt;a.promptBtn2Txt=a.promptDesign.btn2Txt;a.optInSrc="https://cdn.izooto.com/optin/";a.gdprPrompt=void 0!==g.gdprPrompt?g.gdprPrompt:{};a.gdprPromptStatus=void 0!==a.gdprPrompt.status?a.gdprPrompt.status:0;a.tokenCookie=void 0!==g.tokenCookie&&""!==g.tokenCookie?g.tokenCookie:"iztoken";a.isWelcomeNotification=void 0!==g.welcomeNotification.status?g.welcomeNotification.status:0;a.welcomeTitle=void 0!==g.welcomeNotification.title?g.welcomeNotification.title:"";a.welcomeBody=void 0!==g.welcomeNotification.body?g.welcomeNotification.body:"";a.welcomeIcon=void 0!==g.welcomeNotification.icon?g.welcomeNotification.icon:"";a.welcomeUrl=void 0!==g.welcomeNotification.url?g.welcomeNotification.url:"";a.welcomeShowAfter=void 0!==g.welcomeNotification.showAfter?g.welcomeNotification.showAfter:0;a.welcomeTimeout=void 0!==g.welcomeNotification.clickTimeout?g.welcomeNotification.clickTimeout:0;a.debuggerObj={};a.gdprPixel="https://cdn.izooto.com/scripts/sdk/izooto.gdpr.fcm.min.js";a.forceReSubscribe=void 0!==g.forceReSubscribe?g.forceReSubscribe:0;a.reSubFlag=0;a.enableEnricher=0;a.enricherSrc="";a.currentToken="";a.oldGCMBkey="";a.maxPropChar=64;a.subscriptionType="default";a.platform=a.detectPlatform();a.softPmtTrk=void 0!==g.softPmtTrk?g.softPmtTrk:0;a.evtTracking=void 0!==g.evtTracking?g.evtTracking:1;a.propsTracking=void 0!==g.propsTracking?g.propsTracking:1;a.evtPerDay=void 0!==g.evtPerDay?g.evtPerDay:1E4;a.propsPerDay=void 0!==g.propsPerDay?g.propsPerDay:1E4;a.evtPerMonth=void 0!==g.evtPerMonth?g.evtPerMonth:1E4;a.propsPerMonth=void 0!==g.propsPerMonth?g.propsPerMonth:1E4;a.processPriority=void 0!==g.processPriority?g.processPriority:0;a.epConfEnabled=void 0!==g.epConfEnabled?g.epConfEnabled:0;a.trkPmtDisplay=void 0!==g.trkPmtDisplay?g.trkPmtDisplay:0;a.trkPmtUAction=void 0!==g.trkPmtUAction?g.trkPmtUAction:0;a.nativePmtTrk=void 0!==g.nativePmtTrk?g.nativePmtTrk:0;a.gcmToVapid=0;a.utmKeys=["utm_content","utm_medium","utm_source","utm_campaign","utm_term"];a.shortutmKeys=["uco","ume","uso","uca","ute"];a.fcmTokenGenURL="https://iid.googleapis.com/v1/web/iid";a.forceTokenSync=void 0!==g.tokenSync?g.tokenSync:0;a.isNotification="Notification"in window?!0:!1;a.eventAsTrigger=void 0!==g.eventAsTrigger?g.eventAsTrigger:0;a.restrictedProp=0==a.softPmtTrk?"divShow divClosed divAllowed prompted msgclose already_denied".split(" "):["already_denied"];0!=a.promptType&&(0==a.softPmtTrk?a.restrictedProp=["divShow","divClosed","divAllowed","msgclose","already_denied"]:(a.restrictedProp=[],a.trkPmtDisplay||a.restrictedProp.push("divShow"),a.trkPmtUAction||a.restrictedProp.push("divClosed","divAllowed")));a.nativePmtTrk?(a.trkPmtDisplay||a.restrictedProp.push("prompted"),a.trkPmtUAction||a.restrictedProp.push("denied","promptclose")):a.restrictedProp.push("prompted","promptclose");a.epConf={allowed:"enp#enp",already_granted:"enp#enp",promptclose:"sbp#ncls",divAllowed:"sbp#salw",denied:"sbp#nblk",already_denied:"sbp#nblk",divClosed:"sbp#sblk",popclose:"sbp#swc",SoftUnsubscribe:"usub#sunsub",SoftSubscribe:"usub#sunsub",prompted:"sbpd#npd",divShow:"sbpd#spd",browser:"na#nsp",NotImplemented:"ni#nimp",SegmentEvents:"et#evt",SegmentProperties:"prp#prp",TriggerEvent:"trg#trg",PersonalProperties:"pp#pprp",CustomerIDSynch:"pp#idsyn",CustomerIDLogout:"pp#clout",last_visit:"lvi#lvi",Visitor:"viz#viz",ShopifyMapper:"oth#spm",GDPRConsent:"prv#gdp",FCMMigration:"enu#enu",syncAdNetwork:"cs#cs",syncNotificationView:"imp#wimp"};a.pathSetup=function(){1!=a.deviceType&&""!=a.serviceWorkerNameMob&&(a.serviceWorkerName=a.serviceWorkerNameMob);a.serviceWorker=a.domainRoot+a.serviceWorkerName;a.manifest=a.domainRoot+a.manifestName;1==a.isSdkHttps&&(1==a.httpsNoRoot&&""!=a.domainRoot||0==a.httpsNoRoot)&&(a.sourceOrigin=a.domainRoot+"/izooto.html");try{if(void 0!=window._izootoModule||1==window.is_wp||1==is_wp)if(a.pluginStatus=void 0!==g.pluginStatus?g.pluginStatus:1,1==a.pluginStatus){a.cookieLess=0;var b=JSON.stringify({dtype:a.deviceType,btype:a.browser});a.setStorage("bddata",b);if(void 0!=window._izootoModule&&1==window._izootoModule.isMagento){a.cookieLess=0;var c=window._izootoModule;void 0!=c.isSdkHttps&&1==c.isSdkHttps&&(a.serviceWorker="/izooto/assets/sw",a.manifest="/izooto/assets/manifest",a.swScope="/",a.setStorage("evtrk",a.evtTracking))}else if(void 0==window._izootoModule||1!=window._izootoModule.isPrestashop)if(void 0==window._izootoModule||1!=window._izootoModule.isOpencart)a.setStorage("evtrk",a.evtTracking),a.serviceWorker=a.domainRoot+"/?izooto=sw",a.manifest=a.domainRoot+"/?izooto=manifest"}}catch(d){}};a.pathSetup();a.getEndPointURL=function(b){if(0<b.indexOf("#"))return b=b.split("#"),"https://"+b[0]+".izooto.com/"+b[1];b.split("#");return"https://"+b+".izooto.com/"};a.parseEpConf=function(b){var c="";try{if(a.epConf.hasOwnProperty(b))switch(b){case "allowed":c=a.getEndPointURL(a.epConf.allowed);break;case "divAllowed":c=a.getEndPointURL(a.epConf.divAllowed);break;case "denied":c=a.getEndPointURL(a.epConf.denied);break;case "promptclose":c=a.getEndPointURL(a.epConf.promptclose);break;case "divClosed":c=a.getEndPointURL(a.epConf.divClosed);break;case "popclose":c=a.getEndPointURL(a.epConf.popclose);break;case "prompted":c=a.getEndPointURL(a.epConf.prompted);break;case "divShow":c=a.getEndPointURL(a.epConf.divShow);break;case "browser":c=a.getEndPointURL(a.epConf.browser);break;case "SegmentEvents":c=a.getEndPointURL(a.epConf.SegmentEvents);break;case "SegmentProperties":c=a.getEndPointURL(a.epConf.SegmentProperties);break;case "TriggerEvent":c=a.getEndPointURL(a.epConf.TriggerEvent);break;case "PersonalProperties":c=a.getEndPointURL(a.epConf.PersonalProperties);break;case "CustomerIDSynch":c=a.getEndPointURL(a.epConf.CustomerIDSynch);break;case "CustomerIDLogout":c=a.getEndPointURL(a.epConf.CustomerIDLogout);break;case "last_visit":c=a.getEndPointURL(a.epConf.last_visit);break;case "Visitor":c=a.getEndPointURL(a.epConf.Visitor);break;case "ShopifyMapper":c=a.getEndPointURL(a.epConf.ShopifyMapper);break;case "GDPRConsent":c=a.getEndPointURL(a.epConf.GDPRConsent);break;case "SoftSubscribe":c=a.getEndPointURL(a.epConf.SoftSubscribe);break;case "SoftUnsubscribe":c=a.getEndPointURL(a.epConf.SoftUnsubscribe);break;case "already_granted":c=a.getEndPointURL(a.epConf.already_granted);break;case "already_denied":c=a.getEndPointURL(a.epConf.already_denied);break;case "FCMMigration":c=a.getEndPointURL(a.epConf.FCMMigration);break;case "bKey":c=a.getEndPointURL(a.epConf.allowed);break;case "syncAdNetwork":c=a.getEndPointURL(a.epConf.syncAdNetwork);break;case "syncNotificationView":c=a.getEndPointURL(a.epConf.syncNotificationView);break;default:c="https://err.izooto.com/err"}else c="https://err.izooto.com/err"}catch(d){c="https://err.izooto.com/err"}return c};a.getQuerySting=function(b){try{var c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(encodeURIComponent(d)+"="+encodeURIComponent(b[d]));return c.join("&")}catch(e){}};a.getUTMParamsOfUrl=function(b){try{void 0===b&&(b=window.location.href);var c=b.indexOf("?");if(0<c){var d=b.substring(c+1),e=a.izParseQuery(d),f={};return 2<a.utmKeys.map(function(h,k){var l=e.hasOwnProperty(h);!l||""==h&&void 0==h||(f[a.shortutmKeys[k]]=e[h]);return l}).reduce(function(h,k,l){return k?h+1:h})?a.getQuerySting(f):!1}return!1}catch(h){return!1}};try{void 0!==g.services&&g.services.hasOwnProperty("enricher")&&(a.enableEnricher=void 0!==g.services.enricher.status?g.services.enricher.status:0,a.enricherSrc=void 0!==g.services.enricher.src?g.services.enricher.src:"")}catch(b){}""!=a.cDomain&&(!0===document.location.hostname.endsWith(a.cDomain)?a.cDomain="domain="+a.cDomain+";":a.cDomain="");a.startENR=function(){"https:"!=a.locationProtocol||1!=a.isChrome&&1!=a.isFirefox||1!=a.isSubDomain?1==a.setEnr&&(a.setEnrPixel(),a.log("izooto:: enr called")):a.log("izooto:: No Enr")};a.injectPixel=function(b){var c=a.getStorage("izgdpr");2==c||1==a.gdprPromptStatus&&1!=c&&3!=c||"string"!==typeof b||""===b||(c=document.createElement("img"),c.style.height="0px",c.style.width="0px",c.src=b,a.log("Pixel injected : "+b))};a.loadEnricher=function(){if(1==a.enableEnricher&&""!=a.enricherSrc&&!a.isSubDomain)try{var b=document.body?document.body:document.head,c=document.createElement("script");c.id="enricher";c.src=a.enricherSrc;b.appendChild(c)}catch(d){}};a.getBaseTagLink=function(b,c){a.izTagLink=a.parseEpConf("CustomerIDSynch");var d=!1;try{var e=JSON.parse(a.getStorage("iztoken"));d=!0}catch(h){}var f="";!0===d&&void 0!==e.keys&&(void 0!==e.keys.auth&&(f+="&auth="+e.keys.auth),void 0!==e.keys.p256dh&&(f+="&pk="+e.keys.p256dh));d="?pid="+a.client+"&bKey="+b+"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam+f;return void 0!=c?c+d:a.izTagLink+d};a.addTag=function(b,c){a.tagsDeprecation()};a.removeTag=function(b,c){a.tagsDeprecation()};a.addProperty=function(b,c,d){d+="&name="+b+"&value="+c+"&operation=add_property";a.isSafari||(d+="&"+a.endPointParamExtract(a.getStorage("iztoken")));b=a.parseEpConf("CustomerIDSynch");c=d.indexOf("?");d=d.substring(c+1);a.httpRequest(b,"",{},{method:"post",data:d})};a.isJsonString=function(b){try{JSON.parse(b)}catch(c){return!1}return!0};a.filterUserProp=function(b,c){try{var d={},e=0;Object.keys(b).map(function(f){var h=f;f=f.substring(0,32);if(63>=e&&""!=f.trim()&&32>=f.length)if(newKey=f.toLowerCase(),newKey=newKey.trim(),f=b[h],"string"===typeof f&&""!=f&&"add"==c){f=f.trim();objValTrimmed=f.substring(0,a.maxPropChar);var k=/^(https?):\/\//;""!=f&&(f.length<=a.maxPropChar||k.test(f))?d[newKey]=f:d[newKey]=objValTrimmed;e++}else if("object"===typeof f){if(f instanceof Array&&1<=f.length){h=[];var l=0;for(k in f){var m=f[k];m=m.substring(0,a.maxPropChar);"number"==typeof m&&null!=m&&63>=l&&m.toString().length<=a.maxPropChar?(h.push(m),l++):"string"==typeof m&&""!=m.trim()&&63>=l&&m.trim().length<=a.maxPropChar&&(m=m.trim(),h.push(m),l++)}1<=h.length&&(d[newKey]=h,e++)}}else"boolean"===typeof f&&"add"==c?(d[newKey]=f,e++):"number"===typeof f&&"add"==c&&f.toString().length<=a.maxPropChar&&null!=f&&(d[newKey]=f,e++)});return d}catch(f){}return!1};a.filterEv=function(b){try{var c={},d=0;Object.keys(b).map(function(e){var f=e;e=e.substring(0,32);15>=d&&""!=e.trim()&&32>=e.length&&(newKey=e.toLowerCase(),newKey=newKey.trim(),e=b[f],"string"===typeof e&&""!=e?(e=e.trim(),objValTrimmed=e.substring(0,a.maxPropChar),f=/^(https?):\/\//,""!=e&&(e.length<=a.maxPropChar||f.test(e))?c[newKey]=e:c[newKey]=objValTrimmed,d++):"boolean"===typeof e?(c[newKey]=e,d++):"number"===typeof e&&(e.toString().length<=a.maxPropChar&&null!=e||-1<a.allowedKeys.indexOf(newKey))&&(c[newKey]=e,d++))});return c}catch(e){}return!1};a.shouldSend=function(b,c,d){if("evt"==b)if(a.evtTracking){if(a.getApihcStorage("evt_pd","")==c&&a.getApihcStorage("evt_pm","")==d&&(a.evtPerDay<=a.getApihcStorage("evt_pd","counter")||a.evtPerMonth<=a.getApihcStorage("evt_pm","counter")))return!1}else return!1;else if("userp"==b)if(a.propsTracking){if(a.getApihcStorage("prop_pd","")==c&&a.getApihcStorage("prop_pm","")==d&&(a.propsPerDay<=a.getApihcStorage("prop_pd","counter")||a.propsPerMonth<=a.getApihcStorage("prop_pm","counter")))return!1}else return!1;return!0};a.events={};a.events.toTriggerData=function(b,c){var d={collection_viewed:["collection_viewed",{collection_title:"collection_name",collection_link:"collection_url"}],product_viewed:["product_viewed",{product_title:"product_name",product_link:"product_url"}],added_to_cart:["added_to_cart",{product_title:"product_name"}],add_to_cart:["added_to_cart",{product_title:"product_name"}],order_placed:["order_placed",{}],purchased:["order_placed",{}]},e={},f={};d.hasOwnProperty(b)&&(b=d[b][0],e=d[b][1]);if(void 0!=c)for(var h in c)e.hasOwnProperty(h)?f[e[h]]=c[h]:f[h]=c[h];return[b,f]};a.events.syncAsTrigger=function(b,c){var d="collection_viewed product_viewed added_to_cart add_to_cart order_placed purchased".split(" "),e={product_viewed:["product_browsed"],added_to_cart:["product_addedtocart","product_browsed"],order_placed:["product_addedtocart","product_browsed"]};if(1==a.eventAsTrigger&&0<=d.indexOf(b)&&(d=a.events.toTriggerData(b,c),0<Object.keys(d[1]).length?a.sendEventsData("trg",d[0],d[1]):a.sendEventsData("trg",d[0]),e.hasOwnProperty(d[0]))){e=e[d[0]];for(var f in e)a.sendEventsData("trg",e[f])}};a.sendEventsData=function(b,c,d){var e=a.getStorage("izgdpr"),f=a.eventsURL;a.todate=new Date;a.date=a.todate.getDate();a.month=a.todate.getMonth()+1;10>a.month&&(a.month="0"+a.month.toString());if(2!=e&&(1!=a.gdprPromptStatus||1==e||3==e)){f=a.getStorage("iztoken");token=a.getBrowserKeyFromToken(f);if("userp"===b){a.eventsURL=a.parseEpConf("SegmentProperties");if(!a.shouldSend("userp",a.date,a.month))return;if(void 0!==c.add&&1<=Object.keys(c.add).length){var h="add";var k=a.filterUserProp(c.add,h)}else if(void 0!==c.remove&&1<=Object.keys(c.remove).length)h="remove",k=a.filterUserProp(c.remove,h);else{a.log("Invalid JSON format");return}if(!k){a.log("Invalid Json Data");return}c=JSON.stringify(k)}else if("evt"===b){a.eventsURL=a.parseEpConf("SegmentEvents");if(!a.shouldSend("evt",a.date,a.month))return;a.setApihcStorage("evt_pd","INCRCount",a.date);a.setApihcStorage("evt_pm","INCRCount",a.month);"string"==typeof c&&(c=c.toLowerCase(),c=c.trim(),c.search(" "));if("string"==typeof c&&""!=c||"number"==typeof c){if(h=c,void 0!=d&&1<=Object.keys(d).length){k=a.filterEv(d);if(!k){a.log("Invalid Json Data");return}c=JSON.stringify(k)}}else return}else if("pers"===b){if(a.persURL=a.parseEpConf("PersonalProperties"),void 0!=c&&1<=Object.keys(c).length){k=a.filterPersonalisation(c);if(!k){a.log("Invalid Json Data");return}c=JSON.stringify(k)}}else if("trg"===b)if(a.eventsURL=a.parseEpConf("TriggerEvent"),"string"==typeof c&&(c=c.toLowerCase(),c=c.trim(),c.search(" ")),"string"==typeof c&&""!=c||"number"==typeof c){if(h=c,void 0!=d&&1<=Object.keys(d).length){k=a.filterTrigger(d);if(!k){a.log("Invalid Json Data");return}c=JSON.stringify(k)}}else return;else return;if(""!=token){var l=0;try{f=JSON.parse(f),1<Object.keys(f).length&&(l=1)}catch(m){}e="pid="+a.client+"&bKey="+token+
"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&et="+b+"&ge="+a.gdprPromptStatus;a.isSafari||(e+="&"+a.endPointParamExtract(a.getStorage("iztoken")));"pers"!=b&&(e=e+"&act="+h);1==l&&(e=e+"&auth="+f.keys.auth+"&pk="+f.keys.p256dh);if(!(void 0===d||void 0!=d&&1>Object.keys(d).length)||"evt"!=b&&"trg"!=b)if(a.isJsonString(c)&&1<=Object.keys(k).length)a.log("final obj :: "+c),k=encodeURIComponent(c),e=e+"&val="+k;else return;if("userp"==b){k=a.getStorage("izup");f=a.getIzSync("userp");if("remove"!=h&&""!=k&&!0===a.matchProp(k,c)&&""!=f&&1440>a.getTimeDiff(f)){1==a["debugger"].status&&a["debugger"].log("User Property: Already Sent to iZooto "+c,a["debugger"].successCode);return}a.setApihcStorage("prop_pd","INCRCount",a.date);a.setApihcStorage("prop_pm","INCRCount",a.month)}else if("pers"==b&&(k=a.getStorage("izPers"),f=a.getIzSync("izPers"),""!=k&&!0===a.matchProp(k,c)&&""!=f&&1440>a.getTimeDiff(f)))return;f=a.eventsURL;"pers"===b&&(f=a.persURL);a.httpRequest(f,function(){var m=a["debugger"].msgSet;if("userp"==b){var n="User Property";"remove"==h?a.removeStorage("izup"):(a.isLocalStorage&&localStorage.setItem("izup",encodeURIComponent(c)),a.setIzSync("userp"))}else"pers"==b?(n="Personalization Property",a.isLocalStorage&&localStorage.setItem("izPers",encodeURIComponent(c)),a.setIzSync("izPers")):n="evt"==b?"User Event":"Trigger";if(1==a["debugger"].status){var p=n+": "+c+" "+m.ev;if("evt"==b||"trigger"==b)p=n+": "+h+" "+
m.ev,d&&(p+=" with data "+c);a["debugger"].log(p,a["debugger"].successCode)}},{},{method:"post",data:e})}else a.log("Invalid events data")}};a.filterTrigger=function(b){try{var c={},d=0;Object.keys(b).map(function(e){var f=e;e=e.substring(0,32);15>=d&&""!=e.trim()&&32>=e.length&&(newKey=e.toLowerCase(),newKey=newKey.trim(),e=b[f],"string"===typeof e&&""!=e&&(e=e.trim(),objValTrimmed=e.substring(0,512),c[newKey]=""!=e&&512>=e.length?e:objValTrimmed,d++))});return c}catch(e){}return!1};a.filterPersonalisation=function(b){try{var c={},d=0;Object.keys(b).map(function(e){var f=e;e=e.substring(0,32);1>d&&""!=e.trim()&&32>=e.length&&(newKey=e.toLowerCase(),newKey=newKey.trim(),e=b[f],"string"===typeof e&&""!=e?(e=e.trim(),objValTrimmed=e.substring(0,a.maxPropChar),c[newKey]=""!=e&&e.length<=a.maxPropChar?e:objValTrimmed,d++):"number"===typeof e&&e.toString().length<=a.maxPropChar&&null!=e&&(c[newKey]=e,d++))});return c}catch(e){}return!1};a.matchProp=function(b,c){try{b=JSON.parse(b),c=JSON.parse(c)}catch(k){a.log(k)}if("object"!=typeof b)return!1;for(var d in c){if(void 0==b[d])return!1;if("object"==typeof c[d]){if(c[d]instanceof Array&&b[d]instanceof Array){var e=c[d],f=b[d],h;for(h in e)if(0>f.indexOf(e[h]))return!1}}else if(b[d]!=c[d])return!1}return!0};a.tagsDeprecation=function(){console.warn("iZooto :: Tags are no longer supported. See https://help.izooto.com/article/segementation/ ")};a.removeItemFromQ=function(b){for(var c in window._izq)window._izq[c][0]==b&&window._izq.splice(c,1)};a.syncQueue=function(b,c){if("[object Array]"!==Object.prototype.toString.call(b))a.log("Invalid _izq : "+JSON.stringify(b,null,4));else if(0===b.length)a.log("_izq is empty.");else{var d=[],e;for(e in window._izq)d.push(window._izq[e]);if(null===c)d.map(function(l,m){0<=window._izq.indexOf(l)&&("[object Array]"===Object.prototype.toString.call(l)?"customizeOptInPrompt"===l[0]&&"object"==typeof l[1]?a.customizeOptInPrompt(l[1]):("register_callback"===l[0]&&"function"===typeof l[1]&&(a.userCallback=l[1],a.removeItemFromQ(l[0])),"registerSubscriptionCallback"===l[0]&&"function"===typeof l[1]&&(a.subscriptionCallback=l[1],a.removeItemFromQ(l[0])),"registerPromptDisplayCallback"===l[0]&&"function"===typeof l[1]&&(a.promptCallback=l[1],a.removeItemFromQ(l[0])),"triggerPrompt"===l[0]&&(a.promptUser(),a.removeItemFromQ(l[0])),"triggerPromptWithDelay"===l[0]&&(setTimeout(a.promptUser,a.promptDelay),a.removeItemFromQ(l[0])),"syncFCMToken"===l[0]&&("string"==typeof l[1]&&""!=l[1]&&(a.subType=1,a.fcmToken=l[1],a.sendEnrHit("allowed",1,l[1])),a.removeItemFromQ(l[0])),"updateSubscription"===l[0]&&("subscribe"!=l[1]&&"unsubscribe"!=l[1]||a.updateSubscription(l[1]),a.removeItemFromQ(l[0])),"gaId"===l[0]&&"string"===typeof l[1]&&"object"==typeof l[2]&&(a.ga.initialize(l),a.removeItemFromQ(l[0]))):"object"===typeof l&&l.hasOwnProperty("autoPrompt")&&!1===l.autoPrompt&&(a.autoPrompt=!1))});else{var f=null;for(e=0;e<d.length;e++){f=d[e];"[object Array]"===Object.prototype.toString.call(f)&&"triggerPrompt"===f[0]&&(a.promptUser(),a.removeItemFromQ(f[0]));"triggerPromptWithDelay"===f[0]&&(setTimeout(a.promptUser,a.promptDelay),a.removeItemFromQ(f[0]));"syncFCMToken"===f[0]&&("string"==typeof f[1]&&""!=f[1]&&(a.subType=1,a.fcmToken=f[1],a.sendEnrHit("allowed",1,f[1])),a.removeItemFromQ(f[0]));if("[object Array]"===Object.prototype.toString.call(f))if("updateSubscription"===f[0])"subscribe"!=f[1]&&"unsubscribe"!=f[1]||a.updateSubscription(f[1]),a.removeItemFromQ(f[0]);else if("userProfile"===f[0])void 0!=f[1]&&""!=f[1]&&(a.sentUserProp=f[1],a.sendEventsData("userp",f[1])),a.removeItemFromQ(f[0]);else if("event"===f[0]){var h=void 0!=f[1]?f[1]:"";"string"==typeof h&&(h=h.trim());h=h.substring(0,32);void 0!=h&&("string"==typeof h||"number"==typeof h)&&32>=h.toString().trim().length&&""!=h&&(void 0!=f[2]&&"object"==typeof f[2]?(a.sendEventsData("evt",h,f[2]),a.events.syncAsTrigger(h,f[2])):(a.sendEventsData("evt",h),a.events.syncAsTrigger(h)));a.removeItemFromQ(f[0])}else"personalizationProperty"===f[0]?(void 0!=f[1]&&""!=f[1]&&(a.sentUserProp=f[1],a.sendEventsData("pers",f[1])),a.removeItemFromQ(f[0])):"trigger"===f[0]?(h=void 0!=f[1]?f[1]:"","string"==typeof h&&(h=h.trim()),h=h.substring(0,32),void 0!=h&&("string"==typeof h||"number"==typeof h)&&32>=h.toString().trim().length&&""!=h&&(void 0!=f[2]&&"object"==typeof f[2]?a.sendEventsData("trg",h,f[2]):a.sendEventsData("trg",h)),a.removeItemFromQ(f[0])):"gaId"===f[0]&&"string"===typeof f[1]&&"object"==typeof f[2]&&(a.ga.initialize(f),a.removeItemFromQ(f[0]));f[0]&&a.log("Item Processed : "+f[0]);if("[object Array]"===Object.prototype.toString.call(f)&&2===f.length&&"string"===typeof f[0]){h=f[0];f=f[1];var k=a.getBaseTagLink(c);1!==a.izTags&&a.log("tags disabled");switch(h){case "add_tag":window._izq.splice(e,1);a.addTag(f,k);break;case "remove_tag":window._izq.splice(e,1);a.removeTag(f,k);break;case "add_property":if("object"!==typeof f||"string"!==typeof f.name||"string"!==typeof f.value&&"number"!==typeof f.value&&"boolean"!==typeof f.value||""===f.value){a.log("Invalid payload at index (add_tag) : "+e+" : "+JSON.stringify(f,null,4));continue}window._izq.splice(e,1);a.addProperty(f.name,f.value,k);break;default:a.log("Invalid operation at index : "+e+" : "+h)}}}}}};a.setupQueue=function(){"[object Array]"!==Object.prototype.toString.call(window._izq)&&(window._izq=[]);window._izq.push=function(b){if("[object Array]"===Object.prototype.toString.call(b)&&"getSubscriberId"===b[0]){var c=a.getStorage("iztoken");return c=a.getBrowserKeyFromToken(c)}if("[object Array]"===Object.prototype.toString.call(b)&&"customizeOptInPrompt"===b[0]&&"object"==typeof b[1])a.customizeOptInPrompt(b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"debug"===b[0]&&1==b[1])a["debugger"].init();else if("[object Array]"===Object.prototype.toString.call(b)&&"triggerPrompt"===b[0])a.promptUser();else if("[object Array]"===Object.prototype.toString.call(b)&&"syncFCMToken"===b[0])"string"==typeof b[1]&&""!=b[1]&&(a.subType=1,a.fcmToken=b[1],a.sendEnrHit("allowed",1,b[1]));else if("[object Array]"===Object.prototype.toString.call(b)&&"triggerPromptWithDelay"===b[0])setTimeout(a.promptUser,a.promptDelay);else if("[object Array]"===Object.prototype.toString.call(b)&&"updateSubscription"===b[0])"subscribe"!=b[1]&&"unsubscribe"!=b[1]||a.updateSubscription(b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"userProfile"===b[0])void 0!=b[1]&&""!=b[1]&&a.sendEventsData("userp",b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"personalizationProperty"===b[0])void 0!=b[1]&&""!=b[1]&&a.sendEventsData("pers",b[1]);else if("[object Array]"===Object.prototype.toString.call(b)&&"event"===b[0])c=void 0!=b[1]?b[1]:"","string"==typeof c&&(c=c.trim()),c=c.substring(0,32),void 0!=c&&("string"==typeof c||"number"==typeof c)&&32>=c.toString().trim().length&&""!=c&&(void 0!=b[2]&&"object"==typeof b[2]?(a.sendEventsData("evt",c,b[2]),a.events.syncAsTrigger(c,b[2])):(a.sendEventsData("evt",c),a.events.syncAsTrigger(c)));else if("[object Array]"===Object.prototype.toString.call(b)&&"trigger"===b[0])c=void 0!=b[1]?b[1]:"","string"==typeof c&&(c=c.trim()),c=c.substring(0,32),void 0!=c&&("string"==typeof c||"number"==typeof c)&&32>=c.toString().trim().length&&""!=c&&(void 0!=b[2]&&"object"==typeof b[2]?a.sendEventsData("trg",c,b[2]):a.sendEventsData("trg",c));else if("[object Array]"===Object.prototype.toString.call(b)&&"gaId"===b[0]&&"string"==typeof b[1]&&"object"==typeof b[2])a.ga.initialize(b);else if(c=a.getStorage("iztoken"),c=a.getBrowserKeyFromToken(c),""===c)a.log("Token is empty.");else{var d=[];d.push(b);a.syncQueue(d,c)}}};a.getBrowserKeyFromToken=function(b){var c=!0;try{JSON.parse(b)}catch(d){c=!1}return c?a.getSubscriptionKey(b):b};a.processQueue=function(){if(!a.isSubDomain){var b=a.getStorage("iztoken");b=a.getBrowserKeyFromToken(b);a.syncQueue(window._izq,null);""!==b&&void 0!==window._izq&&a.syncQueue(window._izq,b);a.setupQueue()}};a.createWelcomeNotification=function(){if(1===a.isWelcomeNotification&&""!=a.welcomeIcon&&""!=a.welcomeTitle&&""!=a.welcomeBody){var b=new Notification(a.welcomeTitle,{icon:a.welcomeIcon,body:a.welcomeBody,tag:"welcome"});b.onclick=function(){""!=a.welcomeUrl?(b.close(),window.open(a.welcomeUrl,"_blank")):b.close()};0<a.welcomeTimeout&&setTimeout(function(){b.close()},a.welcomeTimeout)}};a.showWelcomeNotification=function(b){if(1===a.isWelcomeNotification&&""!=a.welcomeUrl&&""!=a.welcomeIcon&&""!=a.welcomeTitle&&""!=a.welcomeBody){var c=!1;try{var d=JSON.parse(b);c=!0}catch(k){}var e="";if(!0===c)if(e="&bKey="+a.getSubscriptionKey(b),void 0!==d.keys&&void 0!==d.keys.p256dh)e+="&auth="+d.keys.auth,e+="&pk="+d.keys.p256dh;else{1==a.isSdkHttps&&a.createWelcomeNotification();return}else e="&bKey="+b;try{var f=new XMLHttpRequest,h="pid="+a.client+"&btype="+a.browser+e+"&ref=izwp";f.open("POST",a.locationProtocol+"//api.izooto.com/wn/welcomepush.php",!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.onreadystatechange=function(){4==f.readyState&&200==f.status&&a.log(f.responseText)};f.send(h)}catch(k){a.log("No welcome Notification")}}};a.addGdprPixel=function(){if(3!=a.getStorage("izgdpr"))try{var b=document.body?document.body:document.head,c=document.createElement("script");c.id="izootoGdprSdk";c.src=a.gdprPixel;b.appendChild(c)}catch(d){}};a.ga.process=function(b){if(""!=a.ga.id)try{window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;var c=""!=a.platform?a.platform:"custom";ga("create",a.ga.id,"auto");ga("send","event","izooto",b,c);a.log("sending response :: "+b)}catch(d){}};a.ga.initialize=function(b){a.ga.id=b[1];b=b[2];b.subscriptionCallback&&"object"==typeof b.subscriptionCallback&&(a.ga.subscriptionCallback=b.subscriptionCallback);b.promptDisplayCallback&&"object"==typeof b.promptDisplayCallback&&(a.ga.promptDisplayCallback=b.promptDisplayCallback)};a.ga.isCallbackAllowed=function(b,c){for(var d in b){var e=b[d];if("string"==typeof e&&"all"==e.toLowerCase()||e==c)return!0}return!1};a.callbackResponse=function(b,c){if(0!==Object.keys(c).length){if(0===b){if("function"===typeof a.subscriptionCallback)a.subscriptionCallback(c);else if("function"===typeof a.userCallback){if(7==c.statuscode||8==c.statuscode)c={response:"unsubscribed",statuscode:7};a.userCallback(c)}a.ga.isCallbackAllowed(a.ga.subscriptionCallback,c.statuscode)&&a.ga.process(c.response)}1===b&&("function"===typeof a.promptCallback&&a.promptCallback(c),a.ga.isCallbackAllowed(a.ga.promptDisplayCallback,c.statuscode)&&a.ga.process(c.response))}};a.getMetaValue=function(b){try{for(var c=document.getElementsByTagName("meta"),d=0;d<c.length;d++)if(c[d].getAttribute("name")===b||c[d].getAttribute("property")===b)return c[d].getAttribute("content")}catch(e){}return""};a.getLang=function(){var b=document.documentElement.lang;if(""==b)try{for(var c=document.getElementsByTagName("meta"),d=0;d<c.length;d++)"content-language"==c[d].getAttribute("http-equiv")&&(b=c[d].getAttribute("content"))}catch(e){}return b};a.syncLastVisit=function(){a.sysEventUrl=a.parseEpConf("last_visit");var b=a.getLang(),c=a.getMetaValue("keywords"),d={last_website_visit:!0};""!=b&&(d.lang=b);""!=c&&(d.keywords=c);""!=a.getStorage("iztoken")&&(b="pid="+a.client,b+="&"+a.bkeyParamExtract(a.getStorage("iztoken")),b=b+"&et=userp&act=add&val="+JSON.stringify(d),a.httpRequest(a.sysEventUrl,function(){},{},{method:"post",data:b}))};a.pixelEventReciever=function(b,c){var d={},e={};if(c&&"already_granted"!=b)d={response:"subscribed",statuscode:1},void 0!=a.sentUserProp&&a.sendEventsData("userp",a.sentUserProp),1==a.gdprPromptStatus&&a.addGdprPixel(),""!=a.sourceOriginAlt&&a.rmSubs(),a.callbackResponse(0,d),0!=a.isShopify&&(a.shopifyInit(!0),a.resetProductCookie(),a.checkAndSendShopifyEvents(!0)),void 0!=a.masterDomain&&""!=a.masterDomain&&a.masterCallback(!1),a.tabAbandonment.init(),a.videoPlaybook.init(),a.syncHookInDb("syncNotificationView"),a.syncHookInDb("syncNotificationClick");else if("already_granted"==b)d={response:"already subscribed",statuscode:2},0!=a.isShopify&&(a.shopifyInit(),a.resetProductCookie(),a.checkAndSendShopifyEvents(!0)),a.syncLastVisit(),void 0!=a.masterDomain&&""!=a.masterDomain&&a.masterCallback(!0),a.callbackResponse(0,d),a.tabAbandonment.init(),a.videoPlaybook.init(),a.syncHookInDb("syncNotificationView"),a.syncHookInDb("syncNotificationClick");else{switch(b){case "denied":d={response:"blocked",statuscode:3};break;case "already_denied":d={response:"already blocked",statuscode:4};break;case "browser":d={response:"browser not supported",statuscode:5};break;case "promptclose":d={response:"prompt closed",statuscode:6};break;case "unsubscribed":d={response:"soft unsubscribed",statuscode:7};break;case "already_unsubscribed":d={response:"already soft unsubscribed",statuscode:8};break;case "divAllowed":d={response:"soft subscribed",statuscode:9}}switch(b){case "divShow":e={response:"soft prompt displayed",statuscode:1};break;case "divClosed":e={response:"soft prompt closed",statuscode:2};break;case "prompted":e={response:"native prompt displayed",statuscode:3};break;case "popopen":e={response:"prompt window opened",statuscode:4};break;case "popclose":e={response:"prompt window closed",statuscode:5}}a.callbackResponse(0,d);a.callbackResponse(1,e)}};a.syncHookInDb=function(b){if("syncNotificationClick"==b||"syncNotificationView"==b)if(void 0!=a[b]){var c=a[b];a.db.init().then(function(d){a.db.getData(d,"options",b).then(function(e){(e&&e.hasOwnProperty("val")?e.val:"")!=c&&a.db.addUpdate(d,b,c).then(function(f){a.log(f)})["catch"](function(f){a.log(f)})})["catch"](function(e){a.log(e)})})["catch"](function(d){a.log(d)})}else a.log("Invalid Hook Request")};a.setPromptCount=function(b){"prompted"==b?(b=""!=a.getizConfig("pmtcount")?a.getizConfig("pmtcount")+
1:1,a.setizConfig("pmtcount",b)):"divShow"==b&&(b=""!=a.getizConfig("dscount")?a.getizConfig("dscount")+1:1,a.setizConfig("dscount",b))};a.getTokenThenFunction=function(b,c,d){1==a.tokenGen&&(b=b+"&fe=1&ft="+a.fcmToken);"http:"===a.locationProtocol?(b=b+"&sw="+a.swversion,a.httpRequest(d,c,{},{method:"post",data:b})):a.getswVersionPromise().then(function(e){b=b+"&sw="+e;a.httpRequest(d,c,{},{method:"post",data:b})})["catch"](function(e){a.httpRequest(d,c,{},{method:"post",data:b})})};a.getTokenCatchFunction=function(b,c,d){a.httpRequest(d,c,{},{method:"post",data:b})};a.syncAdNetwork=function(b,c){var d=a.parseEpConf("syncAdNetwork"),e="pid="+a.client+"&bkey="+b+"&";e+=a.objToParam(c);a.httpRequest(d,function(f,h){200==h&&Object.keys(c).map(function(k){c[k]&&a.setizConfig(k,c[k])})},{},{method:"post",data:e})};a.objToParam=function(b){var c="";try{c=Object.keys(b).map(function(d){return d+"="+b[d]}).join("&")}catch(d){}return c};a.setPixelData=function(b,c,d){try{a.setPromptCount(c)}catch(q){a.log("Error"+
q)}a.fcmEnable||(d=d+"&sw="+a.swversion);var e=a.getUTMParamsOfUrl();!1!==e&&(d=d+"&"+e);if(!(0<=a.restrictedProp.indexOf(c))){try{if("divClosed"==c||"divAllowed"==c||"promptclose"==c||"allowed"==c||"denied"==c||"already_granted"==c)d=d+"&ndc="+a.getizConfig("pmtcount"),d=d+"&sdc="+a.getizConfig("dscount")}catch(q){a.log("Error"+q)}e=0;var f={};if("allowed"==c||"already_granted"==c){var h=a.getStorage("_ga"),k=a.getStorage("taboola global:user-id"),l=a.getStorage("OB-USER-TOKEN"),m=a.getStorage("mgMuidn"),n=a.getizConfig("gac"),p=a.getizConfig("tbc"),x=a.getizConfig("obc"),y=a.getizConfig("mgc");k&&(f.tbc=k);l&&(f.obc=l);m&&(f.mgc=m);h&&1==a.ga.syncCid&&(f.gac=h);if(f.gac&&n!=h||k&&p!=k||l&&x!=l||m&&y!=m)e=1;0<Object.keys(f).length&&(d+="&"+a.objToParam(f))}if("already_granted"==c)if(a.isChrome&&(h=a.getStorage("izBver"),""==h?a.isLocalStorage&&localStorage.setItem("izBver",a.browserVer):50>h&&50<=a.browserVer&&(b+="&up=1")),h=a.getBrowserKeyFromToken(a.getStorage("iztoken")),k=a.getIzSync("ag"),l=a.getIzSync("agt"),a.currentToken!=h)a.log("Force Sync");else{if(1==e&&a.syncAdNetwork(h,f),1==k&&1!=a.forceTokenSync&&1!=a.gcmToVapid||1==a.getIzSync("gvm")||1==a.forceTokenSync&&""!=l&&1440>a.getTimeDiff(l))return}else if("already_denied"==c&&(l=a.getIzSync("ad"),1==l))return;var v=1,r=function(q,z){v++;200==z?("already_granted"==c?(a.setIzSync("ag",1),a.setIzSync("agt"),1==a.getStorage("izgtv")&&a.setIzSync("gvm",1)):"already_denied"==c?a.setIzSync("ad",1):1==a.gcmToVapid&&"allowed"==c?a.setIzSync("gvm",1):1==a.gcmToVapid&&"allowed"==c&&a.setIzSync("gvm",1),("allowed"==c||"already_granted"==c)&&0<Object.keys(f).length&&Object.keys(f).map(function(t,A){f[t]&&a.setizConfig(t,f[t])})):(10>=v&&setTimeout(function(){a.setStorage("izpte",a.subType);a.httpRequest(b,r,{},{method:"post",data:d})},2500),a.log("Synced :: "+req.status))};if("allowed"!=c&&"already_granted"!=c||a.isSafari||!a.fcmEnable)2==a.subType&&(d=d+"&vpk="+a.vapid),1==a.subType&&(d=d+"&fe=1&ft="+a.fcmToken,a.setStorage("izfcmtoken",a.fcmToken)),a.setStorage("izpte",a.subType),a.httpRequest(b,r,{},{method:"post",data:d});else{try{var u=a.izParseQuery(d),w={endpoint:u.ep,keys:{auth:u.auth,p256dh:u.pk}}}catch(q){a.httpRequest(b,r,{},{method:"post",data:d});return}"allowed"==c&&a.getToken(w).then(function(){a.getTokenThenFunction(d,r,b)})["catch"](function(q){a.log("error in get Token:"+q);a.setStorage("izpte",a.subType);a.httpRequest(b,r,{},{method:"post",data:d})});"already_granted"==c&&(""==a.getStorage("iztoken")||""==a.getStorage("izfcmtoken")?a.getToken(w).then(function(){a.getTokenThenFunction(d,r,b)})["catch"](function(q){a.getTokenCatchFunction(d,r,b)}):(d=d+"&fe=1&ft="+a.getStorage("izfcmtoken"),a.setStorage("izpte",a.subType),a.httpRequest(b,r,{},{method:"post",data:d})))}}};a.httpRequest=function(b,c,d,e){""!=e&&void 0!=e&&void 0!=e.data&&""!=e.data&&0!=a.processPriority&&(e.data=e.data+"&pp="+a.processPriority);var f="GET",h="",k=new XMLHttpRequest;k.onreadystatechange=function(){4==this.readyState&&200==this.status?"function"==typeof c&&c(this.responseText,this.status):4==this.readyState&&200!=this.status&&c(this.responseText,this.status)};"object"==typeof e&&0<Object.keys(e).length&&"post"==e.method&&(f="POST",void 0!=e.data&&""!=e.data&&(h=e.data));k.open(f,b,!0);"POST"==f&&k.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");if("object"==typeof d&&0<Object.keys(d).length)for(var l in d)a.log("header name"+l),k.setRequestHeader(l,d[l]);a.log(b);""!=h?k.send(h):k.send()};a.sendEnrHit=function(b,c,d){if("already_granted"==b)if(0==a.bkeySent)a.bkeySent=1;else return;a.sendEnrUrl=a.parseEpConf(b);try{"https:"==a.locationProtocol?ht=1:ht=0;var e="";e=(new Date).getTimezoneOffset();var f="pid="+a.client+"&ht="+ht+"&btype="+a.browser+"&dtype="+a.deviceType+"&tz="+(e+330)+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+a.optinParam;if("https://err.izooto.com/err"==a.sendEnrUrl){if("undefined"==b||void 0==b)return;f=f+"&error="+b+"&errh=1"}1==a.gcmToVapid&&""!=a.oldGCMBkey&&(a.sendEnrUrl=a.parseEpConf("FCMMigration"),f=f+"&oBkey="+a.oldGCMBkey);1!=a.getIzSync("gvm")&&""!=a.getStorage("izokey")&&1!=a.gcmToVapid&&(a.gcmToVapid=1,a.sendEnrUrl=a.parseEpConf("FCMMigration"),f=f+"&oBkey="+a.getStorage("izokey"));var h=a.getizConfig("IZCID");""!=h&&(f=f+"&izcid="+h);var k=a.sendEnrUrl;if(void 0===d)if("bKey"==b){var l=c;if(!a.isSafari){var m=a.endPointParamExtract(c);f=f+"&"+m}var n=a.bkeyParamExtract(c);f=f+"&"+n;a.pixelEventReciever(b,!0)}else f=f+"&"+b+
"="+c;else l=d,a.isSafari||(m=a.endPointParamExtract(d),f=f+"&"+m),n=a.bkeyParamExtract(d),f=f+"&"+b+"="+c+"&"+n,a.setStorage("iztoken",l);"http:"===a.locationProtocol||1==a.isSafari?a.setPixelData(k,b,f):a.getswVersionPromise().then(function(p){a.swversion=p;a.setPixelData(k,b,f)})["catch"](function(p){a.log("error in getting sw version");a.setPixelData(k,b,f)});"allowed"==b&&void 0!==d&&2==a.browser&&a.showWelcomeNotification(l);"allowed"!=b&&"already_granted"!=b||void 0===d?a.pixelEventReciever(b,!1):(a.setStorage("iztoken",l),a.processQueue(),a.pixelEventReciever(b,!0))}catch(p){a.log("izooto:: "+p)}if("prompted"==b||"divShow"==b)a.activePrompt(),a.setIzSync("userp","",!0),0!=a.repeatPromptDelay&&a.setRepeatPromptDelay(a.repeatPromptDelay),""==a.sourceOriginAlt&&a.removeStorage("iztoken"),a.removeStorage("izfcmtoken");"divClosed"==b&&0!=a.optInCloseDelay&&a.setRepeatPromptDelay(a.optInCloseDelay)};a.bkeyParamExtract=function(b){var c=b,d=0;try{var e=JSON.parse(c);b=a.getSubscriptionKey(c);1<Object.keys(e).length&&(d=1)}catch(f){}return d?"bKey="+b+"&auth="+e.keys.auth+"&pk="+e.keys.p256dh:"bKey="+b};a.endPointParamExtract=function(b){var c="";try{c=JSON.parse(b).endpoint}catch(d){}a.isEdge&&(c=encodeURIComponent(c));return"ep="+c};a.getSubscriptionKey=function(b){b=JSON.parse(b).endpoint;return 1==a.isFirefox?b.substring(48):(a.isOpera||a.isChrome)&&void 0!=b&&0<=b.indexOf("fcm.googleapis.com")?b.substring(36):a.isEdge?encodeURIComponent(b.substring(41)):a.isUcb?b.substring(36):b.substring(40)};a.requestSafariPermissions=function(){window.safari.pushNotification.requestPermission(a.webServiceUrl,a.webPushId,{url:window.location.href},function(b){"granted"===b.permission?(a.closeHttpsBranding(),b=b.deviceToken,a.bkey=b,a.sendEnrHit("allowed","1",b),a.log("Granted Key= "+b)):"denied"===b.permission&&(a.closeHttpsBranding(),a.sendEnrHit("denied","1"))})};a.checkSafariPermission=function(){0==a.promptType&&12.1<=parseFloat(a.browserVer)&&(a.promptType=1,a.optInDesignType=1);if(""!=a.webPushId&&""!=a.webServiceUrl)if(3==a.getStorage("izstatus"))a.pixelEventReciever("already_unsubscribed",!1);else{var b="";"safari"in window&&"pushNotification"in window.safari&&(b=window.safari.pushNotification.permission(a.webPushId),"default"===b.permission?0!=a.promptType&&12.1<=parseFloat(a.browserVer)?a.optinDialog():(2==a.promptType?a.calledManually&&a.requestSafariPermissions():0!=a.promptDelay?setTimeout(function(){a.openHttpsOverlay();a.requestSafariPermissions()},a.promptDelay):(a.openHttpsOverlay(),a.requestSafariPermissions()),a.log("Prompted Safari"),a.sendEnrHit("prompted","1")):"granted"===b.permission?(b=b.deviceToken,a.bkey=b,a.sendEnrHit("already_granted",1,b),a.log("Already Granted & key= "+b)):"denied"===b.permission&&(a.sendEnrHit("already_denied",1),a.log("Denied")))}};a.closePopWindow=function(){if(self==top&&a.isSubDomain)try{setTimeout(function(){window.opener.postMessage(JSON.stringify({izootoMsg:{k:"popclose",v:1}}),"*");window.close()},1E3)}catch(b){a.log("iZooto::unable to close popup")}};a.brandingScroll=function(){null!=document.getElementById("izooto-branding")&&(30<window.pageYOffset||30<document.body.scrollTop)&&a.closeHttpsBranding()};a.openHttpsBranding=function(){if(!a.isSubDomain&&0!=a.branding){if(1!=a.deviceType)try{window.addEventListener("scroll",a.brandingScroll)}catch(d){}try{var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.setAttribute("id","izooto-branding");c.innerHTML=a.httpsBranding;b.appendChild(c)}catch(d){}a.brandingDisable()}};a.openHttpsOverlay=function(){if(!a.isSubDomain&&0!=a.overlay){if(1!=a.deviceType)try{window.addEventListener("scroll",a.brandingScroll)}catch(d){}try{1===a.isChrome&&62<parseInt(a.browserVer)&&a.isMobile()&&(a.httpsOverlay="");var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.setAttribute("id","izooto-branding");c.innerHTML=a.httpsOverlay;b.appendChild(c)}catch(d){}a.brandingDisable()}};a.closeHttpsBranding=function(){if(!a.isSubDomain){try{document.getElementById("izooto-branding").remove()}catch(b){a.log("Error-Removing-Div"+
b)}if(1!=a.deviceType)try{window.removeEventListener("scroll",a.brandingScroll)}catch(b){}}};a.brandingDisable=function(){if(0===a.branding)try{var b=document.getElementsByClassName("izbranding"),c;for(c in b)b[c].style.display="none"}catch(d){}};a.addExternalOptin=function(){var b=a.optInSrc,c=document.body?document.body:document.head,d=document.createElement("script");d.async=!0;d.id="izOptin";d.src=b+""+a.optInDesignType+".js?v=3";c.appendChild(d)};a.openDialog=function(b){if(void 0==b&&""==a.optInDesign&&a.newOptIn&&0!=a.promptType)a.addExternalOptin();else{a.loadOptin();try{var c=document.getElementsByTagName("body")[0],d=document.createElement("div");d.setAttribute("id","izmiddle-box");d.innerHTML=a.dialogDesign;c.appendChild(d)}catch(e){}a.brandingDisable();1==a.promptType?a.sendEnrHit("divShow",1):!0}};a.optinDialog=function(){a.getStorage("izDl")||setTimeout(function(){a.openDialog()},a.promptDelay)};a.setRepeatPromptDelay=function(b){0!==b&&(b*=60,a.cookieLess?a.setStorageWithTime("izDl",1,b):document.cookie="izDl=1;path=/;max-age="+b+";"+a.cDomain+a.cSameSite)};a.initialiseState=function(){"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?a.log("The user has blocked notifications."):"PushManager"in window?navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(c){c&&(a.fcmEnable?a.isChrome?0>c.endpoint.indexOf("fcm.googleapis.com")||a.sendSubscriptionToServer(c):a.sendSubscriptionToServer(c):a.sendSubscriptionToServer(c))})["catch"](function(c){a.log("Error during getSubscription()",c)})}):a.log("Push messaging is not supported."):a.log("Notifications are not supported.")};a.loadScript=function(b){return new Promise(function(c,d){var e=document.createElement("script");e.onload=c;e.onerror=d;e.src=b;(document.body?document.body:document.head).appendChild(e)})};a.addkScript=function(){return(new Promise(function(b,c){a.loadScript(a.sak+"sak_"+a.client+".js").then(b)["catch"](function(d){c(d)})}))["catch"](function(b){reject(b)})};a.getToken=function(b){return new Promise(function(c,d){try{1==a.tokenGen?a.addkScript().then(function(){if(void 0!=izsak)var e=izsak;var f=JSON.stringify(b),h=new XMLHttpRequest;h.addEventListener("readystatechange",function(){if(4===this.readyState&&200==this.status){var k=JSON.parse(this.responseText);a.fcmToken=k.token;a.setStorage("izfcmtoken",a.fcmToken);c(a.fcmToken)}else 4==this.readyState&&200!=this.status&&d()});h.open("POST",a.fcmTokenGenURL);h.setRequestHeader("Content-Type","application/json");h.setRequestHeader("Authorization","key="+
e);h.send(f)})["catch"](function(e){a.log(e)}):c()}catch(e){d()}})};a.innerThenSubscribe=function(b){1==a.isFirefox&&1!=a.ag&&(1!=a.ffoxGranted&&a.isSubDomain&&top!=self?a.sendMessage("allowed",1,"parent"):1==a.ffoxHttps&&"default"!=Notification.permission&&a.closeHttpsBranding(),a.log("Granted & Subscribe"));return a.sendSubscriptionToServer(b)};a.innerCatchSubscribe=function(b){a.closeHttpsBranding();"denied"===Notification.permission?(1==a.ffoxHttps?a.closeHttpsBranding():"default"!=a.subscriptionType||a.isSubDomain||1==a.ad||a.sendEnrHit("denied",1),1!=a.isFirefox&&!a.isAddFcm||1==a.ad||("default"!=a.subscriptionType||a.isSubDomain?a.isSubDomain&&(self!=top?a.sendMessage("denied","1","parent"):(a.sendMessage("denied","1","opener"),a.closePopWindow())):a.sendEnrHit("denied","1")),a.isChrome&&a.isSubDomain&&self==top&&(1!=a.ad&&a.sendMessage("denied","1","opener"),a.closePopWindow()),a.log("Permission for Notification is denied")):("default"===Notification.permission&&(a.closeHttpsBranding(),"default"!=a.subscriptionType||a.isSubDomain?1===a.promptType&&a.isSubDomain&&self==top?a.sendMessage("promptclose",1,"opener"):a.isFirefox&&self!=top&&a.isSubDomain&&a.sendMessage("promptclose",1,"parent"):(a.pixelEventReciever("promptclose",!1),a.sendEnrHit("promptclose","1"))),1==a.gcmToVapidMigrate&&(a.oldGCMBkey=a.getBrowserKeyFromToken(a.getStorage("iztoken")),""==a.oldGCMBkey||void 0==a.oldGCMBkey?navigator.serviceWorker.ready.then(function(c){c.pushManager.getSubscription().then(function(d){d=JSON.stringify(d);bkey=a.getSubscriptionKey(d);a.oldGCMBkey=bkey;a.setStorage("izokey",bkey)})}):a.setStorage("izokey",a.oldGCMBkey),a.gcmToVapid=1,a.setStorage("izgtv",1),a.reSubscribeToken(b)),1!=a.forceReSubscribe&&""==a.masterDomain||a.reSubscribeToken(b),a.closePopWindow(),a.log("Unable to subscribe to push"+b))};a.subscribe=function(){navigator.serviceWorker.ready.then(function(b){b.pushManager.subscribe(a.optObj).then(function(c){a.innerThenSubscribe(c)})["catch"](function(c){a.innerCatchSubscribe(c)})})};a.popupNotice=function(b){try{document.getElementById("dynamic_iz").innerHTML="<center>"+b+"</center>"}catch(c){}};a.sendDataToOpener=function(b,c){0==a.promptType?(a.sendMessage("bKey",b,"opener"),a.popupNotice(a.subscribedMsg)):1==a.ag?(a.sendMessage("already_granted",1,"opener",b),a.popupNotice(a.alreadySubscribedMsg)):(a.sendMessage("allowed",1,"opener",b,c),a.popupNotice(a.subscribedMsg));a.closePopWindow()};a.sendSubscriptionToServer=function(b){var c=JSON.stringify(b);if(""!=a.oldGCMBkey&&void 0!=a.oldGCMBkey&&(b=a.getSubscriptionKey(c),a.oldGCMBkey==b))return;0==a.bkeySent&&("default"!=a.subscriptionType||a.isSubDomain?self==top&&a.isSubDomain?(a.setStorage("iztoken",c),a.getswVersionPromise().then(function(d){a.sendDataToOpener(c,d)})["catch"](function(d){a.log(d);a.sendDataToOpener(c,"")})):1==a.ag?a.sendMessage("already_granted",1,"parent",c):!0:(1==a.ag&&""==a.getStorage("iztoken")&&a.updateSubscription("subscribe",c,!0),1==a.ag?a.sendEnrHit("already_granted","1",c):a.sendEnrHit("allowed","1",c)),a.bkeySent=1)};a.subFrame=function(b,c){var d=a.sourceOrigin+"?action=prompt";d=d+"&izpt="+a.promptType;d=void 0!=b?b:d;c=void 0!=c?c:"izSubFrame";try{izFrame=document.createElement("IFRAME"),izFrame.setAttribute("src",d),izFrame.setAttribute("id",c),izFrame.style.width="0px",izFrame.style.height="0px",izFrame.style.border="0px",izFrame.setAttribute("visibility","hidden"),izFrame.style.display="none",null!=document.body?document.body.appendChild(izFrame):document.head.appendChild(izFrame),a.log("izSubFrame set")}catch(e){a.log("izooto:: unable to subFrame"+
e)}};a.validateToken=function(b){var c=function(d,e){if(200==e){var f=d;a.log("rcv:: "+f);try{f=JSON.parse(f),a.subscriberStatusHandler(f)}catch(h){}}};b=a.ssUrl+"?s=1&bkey="+b+"&pid="+a.client;"https:"==a.locationProtocol?(a.addMsgReciever(),b=a.sourceOrigin+"?action=izcheckperms",a.subFrame(b,"izPermsFrame")):(a.log("validate token"),a.httpRequest(b,c))};a.subscriberStatusHandler=function(b){try{a.log(b),void 0!==b.status&&(1===b.status?(a.setIzstatus(1),a.sendEnrHit("already_granted",1,a.getStorage("iztoken"))):2==b.status?a.setIzstatus(2):0===b.status&&(1===a.promptType?a.optinDialog():0==a.promptType&&a.subFrame()))}catch(c){a.log(c)}};a.closeDialog=function(b){try{1===b?b="divAllowed":b="divClosed",document.getElementById("izmiddle-box").remove(),1===a.promptType?a.sendEnrHit(b,1):a.sendEnrHit("msgclose",1)}catch(c){a.log("Error-Removing-Div"+c)}};a.crossDialog=function(){try{document.getElementById("izmiddle-box").remove()}catch(b){a.log("Error-Removing-Div"+b)}};a.openPopup=function(){a.closeDialog(1);if(a.isSafari)a.openHttpsOverlay(),a.requestSafariPermissions();else if(1==a.promptType&&a.isFirefox&&"https:"==a.locationProtocol&&72<=a.browserVer)a.requestPermission();else if(a.isSdkHttps&&!a.autoPrompt&&"https:"==a.locationProtocol)a.promptUser();else{a.addMsgReciever();var b=void 0!=window.screenLeft?window.screenLeft:screen.left,c=void 0!=window.screenTop?window.screenTop:screen.top,d=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,e=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,f=200,h=200,k=a.promptType;if(1===a.promptType||2==a.promptType)k=1,h=f=500;b=d/2-f/2+b;c=e/2-h/2+c;a.hidePopup&&0===a.promptType&&(h=f=100,b=c=1E4);k=a.sourceOrigin+"?action=prompt&izpt="+k;1==a.fullPopUp&&0!=a.promptType?window.open(k,"iZooto Subscription"):(window.open(k,"iZooto Subscription","scrollbars=yes, width="+f+", height="+h+", top="+c+", left="+
b),a.pixelEventReciever("popopen"))}};a.iscomplete=function(){a.docReady="complete"===document.readyState;a.docReady&&(setTimeout(function(){1==a.overlay?a.openHttpsOverlay():1==a.branding&&a.openHttpsBranding()},100),clearInterval(a.complete))};a.displayElementsOnPrompt=function(){1===a.isChrome?a.complete=setInterval(a.iscomplete,100):1==a.overlay&&a.openHttpsOverlay()};a.requestPermission=function(){var b=a.browserVer,c=function(e){"granted"===e&&(a.registerServiceWorker(),a.subscribe(),a.httpsNoRoot?(a.noRootVersionHandler(),a.addMsgReciever(),a.subFrame()):void 0!=window._izootoModule&&1==window._izootoModule.isMagento?a.cookieLess=0:0==a.isSdkHttps&&a.sendMessage("allowed",1,"parent"),a.ffoxGranted=1);a.closeHttpsBranding()},d=function(e){a.closeHttpsBranding();a.log("Error while requesting permission : "+e)};a.isAddFcm?Notification.requestPermission().then(c)["catch"](d):46<=b?Notification.requestPermission().then(c)["catch"](d):Notification.requestPermission(c);a.sendEnrHit("prompted",1)};a.statusHandler=function(b,c,d){if("default"==c)if("subDomain"===d)try{if(0!==a.promptType){if(self!=top)return a.sendMessage("switchPrompt",1,"parent");a.popupNotice(a.clickOnAllowMsg);a.sendMessage("prompted",1,"opener")}else a.ffox=1,a.log("Prompted Http"),a.sendMessage("prompted",1,"parent");a.requestPermission()}catch(e){a.log("Error occured : "+e)}else(a.httpsNoRoot||a.isAddFcm||a.isFirefox)&&a.requestPermission(),a.ffoxHttps=1,a.isSubDomain||a.displayElementsOnPrompt();else"granted"===Notification.permission?(a.registerServiceWorker(),a.subscribe(),a.ag=1,"subDomain"===d?self!=top&&(a.httpsNoRoot||(b=a.getStorage("iztoken"),""!=b?a.sendMessage("izag",b,"parent"):a.sendMessage("izag",1,"parent")),a.log("ag")):a.httpsNoRoot&&(a.addMsgReciever(),a.subFrame()),a.log("ag_cc")):"denied"===Notification.permission&&(a.ad=1,"subDomain"===d?(self==top?a.sendMessage("izad",1,"opener"):a.sendMessage("izad",1,"parent"),a.popupNotice(a.alreadyDeniedMsg),a.closePopWindow()):a.sendEnrHit("already_denied",1),a.log("ad"))};a.registerServiceWorker=function(){"serviceWorker"in navigator?(a.isSubDomain||""==a.swScope?navigator.serviceWorker.register(a.serviceWorker).then(a.initialiseState)["catch"](function(b){a.isSubDomain||self!=top||1!=a.branding&&1!=a.overlay||a.closeHttpsBranding();a.log(b)}):navigator.serviceWorker.register(a.serviceWorker,{scope:a.swScope}).then(a.initialiseState)["catch"](function(b){a.isSubDomain||self!=top||1!=a.branding&&1!=a.overlay||a.closeHttpsBranding();a.log(b)}),a.isSubDomain||(a.setIndexedDb("gaId"),a.setIndexedDb("sysEvents"))):a.log("Service workers are not supported in this browser.")};a.pushSubscription=function(b,c){if("Notification"in window){if("chrome"==b){try{navigator.permissions.query({name:"notifications"}).then(function(d){if("prompt"===d.state)"subDomain"===c?0!==a.promptType?self!=top?a.sendMessage("switchPrompt",1,"parent"):(a.popupNotice(a.clickOnAllowMsg),a.sendMessage("prompted",1,"opener"),Notification.requestPermission().then(function(f){"default"===f&&(a.sendMessage("promptclose",1,"opener"),a.closePopWindow())})):(a.log("Prompted Http"),a.sendMessage("prompted",1,"parent"),Notification.requestPermission().then(function(f){"default"===f&&0===a.promptType&&self!=top&&a.sendMessage("promptclose",1,"parent")})):"default"===c&&(a.log("Prompted Https"),a.sendEnrHit("prompted",1),a.locationPrompt&&1==a.deviceType&&navigator.geolocation.getCurrentPosition(function(){}),Notification.requestPermission(),a.isSubDomain||a.displayElementsOnPrompt()),d.onchange=function(){a.closeHttpsBranding();"granted"===d.state?(a.registerServiceWorker(),"subDomain"===c?a.sendMessage("allowed",1,"parent"):"default"===c&&a.httpsNoRoot&&(a.noRootVersionHandler(),a.addMsgReciever(),a.subFrame()),a.log("Granted"),1!=a.deviceType&&(a.subscribe(),a.log("chrome mobile subscribe"))):"denied"===d.state&&"subDomain"===c&&(self==top?a.sendMessage("denied",1,"opener"):a.sendMessage("denied",1,"parent"),a.popupNotice(a.blockedMsg),a.log("Denied"),a.closePopWindow())};else if("granted"===d.state){a.registerServiceWorker();a.ag=1;if("subDomain"===c){if(self!=top){if(!a.httpsNoRoot){var e=a.getStorage("iztoken");""!=e?a.sendMessage("izag",e,"parent"):a.sendMessage("izag",1,"parent")}a.log("ag")}}else"default"===c&&a.httpsNoRoot&&(a.addMsgReciever(),a.subFrame());1!=a.deviceType&&(a.subscribe(),a.log("chrome mobile ag subscribe"))}else"denied"===d.state&&(a.ad=1,"subDomain"===c?(self==top?a.sendMessage("izad",1,"opener"):a.sendMessage("izad",1,"parent"),a.popupNotice(a.alreadyDeniedMsg),a.closePopWindow()):"default"===c&&a.sendEnrHit("already_denied",1))})}catch(d){a.log("Unable to read notification permissions")}if("subDomain"==c&&0!=a.promptType&&self!=top&&"default"==Notification.permission)return}else if("firefox"==b||a.isAddFcm)"Notification"in window&&"function"===typeof Notification.requestPermission?a.statusHandler(b,Notification.permission,c):a.log("This browser does not support desktop notification");try{"edge"==b||"chrome"==b&&1!=a.deviceType?a.log("chrome mobile subscribe ignore"):a.subscribe()}catch(d){a.log("Unable To Subscribe")}}};a.sendMessage=function(b,c,d,e,f){if(2!=a.promptType||"allowed"!=b&&"denied"!=b)b={k:b,v:c},void 0!=e&&""!=e&&(b.bkey=e),void 0!=f&&(b.swversion=f),e={izootoMsg:b},"parent"===d?window.parent.postMessage(JSON.stringify(e),"*"):"opener"===d?window.opener&&window.opener.postMessage(JSON.stringify(e),"*"):d.contentWindow.postMessage(JSON.stringify(e),"*")};a.setIzstatus=function(b){a.cookieLess?a.setStorageWithTime("izstatus",b):(date=new Date,2==b&&(a.tokenExpire*=100),date.setTime(date.getTime()+1E3*a.tokenExpire),document.cookie="izstatus="+b+";path=/;max-age="+a.tokenExpire+";expires="+date.toGMTString()+";"+a.cDomain+a.cSameSite)};a.msgReciever=function(b){var c=0,d={};try{d=JSON.parse(b)}catch(e){}void 0!=d.izootoMsg&&(d=d.izootoMsg,void 0!=d.izrmstatus?a.rmSubsReceiver(d.izrmstatus):void 0!=d.k&&"izMasterToFrame"==d.k?a.setMasterStorage(d.v):void 0!=d.k&&"izMasterToParent"==d.k?a.masterConfigReciver(d.v):void 0!=d.k&&"izCidToParent"==d.k?(a.setizConfig("IZCID",d.v),a.setIzSync("IZCID",1)):void 0!=d.izPermsStatus?a.subscriberStatusHandler(d.izPermsStatus):(1==a.httpsNoRoot||1!=a.promptType&&2!=a.promptType?"allowed"==d.k?(a.openDialog(),d.swversion&&(a.swversion=d.swversion),a.setStorage("izid",a.unid),a.sendEnrHit(d.k,d.v)):void 0!=d.bkey?(b=a.getStorage("iztoken"),a.setStorage("iztoken",d.bkey),a.httpsNoRoot?1==a.ag?(a.sendEnrHit(d.k,d.v,d.bkey),a.setIzstatus(1)):a.sendEnrHit("allowed",d.v,d.bkey):(a.sendEnrHit(d.k,d.v,d.bkey),1!=a.isReSubscribe&&""!=b||a.updateSubscription("subscribe",d.bkey))):"bKey"==d.k?(d.swversion&&(a.swversion=d.swversion),a.setStorage("iztoken",d.v),a.sendEnrHit(d.k,d.v),a.bkeySent=1,a.processQueue()):c=1:void 0!=d.bkey?(a.getStorage("iztoken"),d.swversion&&(a.swversion=d.swversion),a.setStorage("iztoken",d.bkey),a.processQueue(),a.sendEnrHit(d.k,d.v,d.bkey),"allowed"==d.k?a.setIzstatus(1):1==a.isReSubscribe?a.updateSubscription("subscribe",d.bkey):(a.updateSubscription("subscribe",d.bkey,!0),a.setIzstatus(1))):"switchPrompt"==d.k?(a.optinDialog(),a.removeStorage("iztoken")):"denied"==d.k&&a.setIzstatus(2),"prompted"==d.k?(a.getStorage("iztoken"),a.removeStorage("iztoken"),a.removeStorage("izfcmtoken"),a.sendEnrHit(d.k,d.v)):"popclose"==d.k?a.pixelEventReciever("popclose",!1):"promptclose"==d.k?(a.pixelEventReciever(d.k,!1),a.sendEnrHit("promptclose","1")):"denied"==d.k?a.sendEnrHit(d.k,d.v):"izag"==d.k?(c=a.getStorage("iztoken"),""!=c&&0===a.bkeySent?(a.sendEnrHit("already_granted",1,c),a.bkeySent=1):1!==d.v?(a.sendEnrHit("already_granted",1,d.v),a.bkeySent=1):1==a.promptType?a.optinDialog():""==c&&a.pixelEventReciever("already_unsubscribed",!1),a.setIzstatus(1)):"izad"==d.k?(a.sendEnrHit("already_denied",1),a.setIzstatus(2)):1==c&&a.sendEnrHit(d.k,d.v)))};a.setManifest=function(){try{if(0==a.subType){var b=a.manifest,c=document.getElementsByTagName("head")[0],d=document.createElement("link");d.rel="manifest";d.href=b;c.appendChild(d);a.log("manifest")}}catch(e){}};a.sendSubscriptionUpdate=function(b,c,d){url=0==c?a.parseEpConf("SoftSubscribe"):2==c?a.parseEpConf("SoftUnsubscribe"):a.supURL;a.httpRequest(url,d,{},{method:"post",data:"pid="+a.client+"&bKey="+b+"&btype="+a.browser+"&dtype="+a.deviceType+"&bver="+a.browserVer+"&pte="+a.subType+"&os="+a.os+"&pt="+a.promptType+"&ge="+a.gdprPromptStatus+"&action="+c})};a.updateSubscription=function(b,c,d){c=void 0===c?a.getStorage("iztoken"):c;c=a.getBrowserKeyFromToken(c);"subscribe"==b?(3==a.getStorage("izstatus")&&a.removeStorage("izstatus"),""!=c?(a.sendSubscriptionUpdate(c,0),0===a.isReSubscribe&&void 0===d?a.pixelEventReciever("subscribed",!0):a.isReSubscribe=0):(a.isReSubscribe=1,a.isSafari||1==a.isSdkHttps&&"https:"==a.locationProtocol?a.initIzooto():(a.promptType=1,a.openPopup()))):"unsubscribe"==b&&""!=c&&a.sendSubscriptionUpdate(c,2,function(){a.setStorage("izstatus",3);a.pixelEventReciever("unsubscribed",!1)})};a.addMsgReciever=function(){if(1!=a.isMsgReciever){a.isMsgReciever=1;try{window.addEventListener("message",function(b){if((-1<a.sourceOrigin.indexOf(b.origin)||""!=a.sourceOriginAlt&&-1<a.sourceOriginAlt.indexOf(b.origin)||-1<a.masterDomain.indexOf(b.origin)||-1<b.origin.indexOf(window.location.host)||3==a.isSubDomain||"https://cdn.izooto.com"==b.origin)&&b.data)try{a.msgReciever(b.data)}catch(c){}})}catch(b){}}};a.startSubscription=function(b){if("chrome"==b||"opera"==b)a.incognitoChecked=1;if("http:"===a.locationProtocol||"https:"===a.locationProtocol&&1!=a.isSdkHttps&&1!=a.isSubDomain){if(!a.getStorage("izpt")||a.isSubDomain){var c=a.getStorage("izstatus");if(0==a.httpContentLoaded||2!=a.promptType){a.addMsgReciever();a.httpContentLoaded=1;var d=a.getStorage("iztoken");if(1===a.tokenFilter){if(""!=d){a.sendEnrHit("already_granted",1,d);return}}else if(""!=c){if(1==c){if(""==d){a.pixelEventReciever("already_unsubscribed",!1);return}a.sendEnrHit("already_granted",1,d)}else 2==c?a.pixelEventReciever("already_denied",!1):3==c&&a.pixelEventReciever("already_unsubscribed",!1);return}if(""!=d||"https:"==a.locationProtocol){a.validateToken(a.getBrowserKeyFromToken(d));return}}c=a.getStorage("iztoken");1===a.promptType?""==c&&a.optinDialog():2==a.promptType?a.calledManually&&""==c&&a.openPopup():a.subFrame()}}else 1===a.isSubDomain&&"https:"==a.locationProtocol?(a.setManifest(),setTimeout(function(){self==top&&window.close()},5E4),a.subscriptionType="subDomain",0!=a.promptDelay&&"default"==Notification.permission&&0==a.promptType&&self!=top?setTimeout(function(){a.pushSubscription(b,a.subscriptionType)},a.promptDelay):a.pushSubscription(b,a.subscriptionType)):"https:"==a.locationProtocol&&(c=a.getStorage("izstatus"),3==c&&"default"!=Notification.permission?a.pixelEventReciever("already_unsubscribed",!1):1==a.httpsNoRoot&&"granted"==Notification.permission&&1==c&&""!=a.getStorage("iztoken")?a.pixelEventReciever("already_granted",!1):(a.isChrome&&a.setManifest(),a.subscriptionType="default",0!=a.promptDelay&&"default"==Notification.permission&&0==a.promptType?setTimeout(function(){a.pushSubscription(b,a.subscriptionType)},a.promptDelay):2==a.promptType&&"default"==Notification.permission?a.calledManually&&a.pushSubscription(b,a.subscriptionType):a.pushSubscription(b,a.subscriptionType)))};a.notificationUnsubscribe=function(){navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(c){c&&c.unsubscribe().then(function(d){a.log("unsubscribed :: "+d)})["catch"](function(d){a.log("Unsubscription failed : "+d)})})["catch"](function(c){a.log("Get subscription failed : "+c)})})["catch"](function(b){})};a.reSubscribeIzooto=function(){try{1!=a.reSubFlag&&(a.reSubFlag=1,navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(c){c&&c.unsubscribe().then(function(d){a.log("Unsubbed");a.bkeySent=0;a.subscribe()})["catch"](function(d){a.log("Unsubscription failed : "+d)})})["catch"](function(c){a.log("Get subscription failed : "+c)})})["catch"](function(b){}))}catch(b){}};a.reSubscribeToken=function(b){try{void 0!=b.name&&"invalidstateerror"==b.name.toLowerCase()&&a.reSubscribeIzooto()}catch(c){}};a.promptUser=function(){2!=a.promptType&&(a.promptType=2,a.dialogDesign="",a.processQueue());a.calledManually=!0;a.initIzooto()};a.shopifyCartTracker=function(b,c){a.log(b);a.log("Purge :"+c);try{var d=JSON.parse(b.responseText);a.log(d);var e=d.token}catch(n){a.log("[shopifyMapper catch]"),a.log(n)}var f=a.getStorage("iz_sh_cart_v2");if(void 0!=e&&""!=e){d="iz_sh_cart_v2="+e;var h=new Date;h.setTime(h.getTime()+864E5);h="expires="+h.toUTCString();if(e!=f||c){f=a.getStorage("iztoken");var k=0;try{f=JSON.parse(f),1<Object.keys(f).length&&(k=1)}catch(n){}a.log("[Mapper hit]");var l=a.parseEpConf("ShopifyMapper"),m="bkey="+a.getBrowserKeyFromToken(a.getStorage("iztoken"));1==k&&(m=m+"&auth="+f.keys.auth+"&pk="+f.keys.p256dh);m+="&btype="+a.browser;m+="&dtype="+a.deviceType;m+="&pid="+a.client;m+="&shopify_token="+e;a.isSafari||(m+="&"+a.endPointParamExtract(a.getStorage("iztoken")));m+="&pte="+a.subType;try{a.httpRequest(l,"",{},{method:"post",data:m+"&custom_topic=custom-js-mapper"}),document.cookie=d+";path=/;"+a.cDomain+h+";"+a.cSameSite}catch(n){a.log("Pixel failed"+l)}}}};a.shopifyFix=function(){try{var b=document.createElement("img");b.style.width="0px";b.style.height="0px";b.src=document.location.protocol+"//"+document.location.hostname+a.manifest}catch(c){}};a.shopifyInit=function(b){var c=!1;void 0!=b&&(c=b);if(2==a.isShopify)a.shopifyCart(),a.log("Old Shopify");else if(1==a.isShopify){a.log("New Shopify");b=5*Math.random();var d=new XMLHttpRequest;d.addEventListener("load",function(e){a.shopifyCartTracker(d,c)});d.open("GET","/cart.js?"+b);d.send()}};a.shopifyCart=function(){var b=a.getStorage("cart");void 0!==b&&""!==b&&(-1!=b.indexOf("=")&&(b=b.split("=")[1]),b!==a.getStorage("iz_sh_cart")&&"ckout="!=b&&(a.setCookie("iz_sh_cart",b),_izq.push(["event","add_to_cart",{cart_id:b}]),a.log("sent add to cart event : "+b)))};a.iz_last_sh_variant="";a.resetProductCookie=function(){a.iz_last_sh_variant="";a.setCookie("iz_last_sh_variant","")};a.checkIfVariantChanged=function(){var b=""==a.iz_last_sh_variant?a.getCookie("iz_last_sh_variant"):a.iz_last_sh_variant,c=ShopifyAnalytics.meta.selectedVariantId;a.log("Product heartbeat");if(1==a.sentShopifyProduct)return!1;if("undefined"===typeof c)return a.sentShopifyProduct=1,!0;if(c==b)return!1;a.log("set cookie of iz_last_sh_variant");a.iz_last_sh_variant=c;a.setCookie("iz_last_sh_variant",c);return!0};a.listenToProductVariant=function(b){a.checkIfVariantChanged()&&(a.log("variant modified"),b());setTimeout(function(){a.listenToProductVariant(b)},5E3)};a.getShopifyModule=function(){var b="";try{if(b=ShopifyAnalytics.meta.page.pageType)return b}catch(e){a.debug&&console.warn("ShopifyAnalytics not available, parsing URL")}b=location.hostname;var c=location.pathname.split("/"),d=c[1];c=c[2];a.log("partOne :"+c+", partZero:"+d);if(""===d)return"home";if("cart"===d)return"cart";if("account"===d&&"orders"===c||"account"===d&&!d)return"orders";if("checkout.shopify.com"===b||"checkouts"===c)return"checkout";if("undefined"!=typeof __st&&__st.s){b=__st.partZero.split("-")[0];if("collections"===b)return"collection";if("products"===b)return"product"}};a.sendShopifyProductViewEvent=function(){var b=ShopifyAnalytics.meta.selectedVariantId,c=location.pathname.split("/"),d=c[c.length-1];a.httpRequest("/products/"+d+"?izreq=product",function(e){try{var f=JSON.parse(e)}catch(l){a.log("Could not fetch data from product API")}if("object"==typeof f&&""!=a.getStorage("iztoken")){f=f.product;e=f.variants;var h=a.getStorage("iztoken");try{JSON.parse(h)}catch(l){}h=a.shopifyApi+"?p=p";var k="pid="+a.client;k+="&"+a.bkeyParamExtract(a.getStorage("iztoken"));k+="&btype="+a.browser;a.isSafari||(k+="&"+a.endPointParamExtract(a.getStorage("iztoken")));k+="&pte="+a.subType;k=k+"&custom_topic=product/view&product_id="+f.id.toString();k+="&product_title="+encodeURIComponent(f.title);k+="&product_handle="+encodeURIComponent(d);k+="&product_page="+encodeURIComponent(window.location.href);k+="&product_type="+f.product_type;a.log(f);null!=f.image&&null!=f.image.src&&(k+="&product_image="+f.image.src);for(index in e)if(f=e[index],f.id==b){k+="&product_price="+f.price;break}a.httpRequest(h,function(l){a.log(l)},{},{method:"post",data:k});a.log("Shopify product view event attempted successfully.")}},{Accept:"application/json"})};a.sendShopifyCollectionViewEvent=function(){var b=location.pathname.split("/"),c=b.indexOf("collections");if(-1==c)a.log("unable to identify collection");else{var d=b[c+1];"all"==d?a.log("Ignoring collection view event for:all"):a.httpRequest("/collections/"+d+"?izreq=collections",function(e){try{var f=JSON.parse(e)}catch(k){a.log("Could not fetch data from collection API")}if("object"==typeof f&&""!=a.getStorage("iztoken")){e=f.collection;f=a.shopifyApi+"?p=p";var h=a.getStorage("iztoken");try{JSON.parse(h)}catch(k){}h="pid="+a.client;h+="&"+a.bkeyParamExtract(a.getStorage("iztoken"));h+="&btype="+a.browser;a.isSafari||(h+="&"+a.endPointParamExtract(a.getStorage("iztoken")));h+="&pte="+a.subType;h=h+"&custom_topic=collection/view&collection_id="+e.id.toString();h+="&collection_handle="+encodeURIComponent(d);h+="&collection_title="+encodeURIComponent(e.title);h+="&collection_page="+encodeURIComponent(window.location.href);void 0!=e.image&&void 0!=e.image.src&&(h+="&collection_image="+e.image.src);a.httpRequest(f,function(k){a.log(k)},{},{method:"post",data:h});a.log("Shopify collection view event attempted successfully.")}},{Accept:"application/json"})}};a.checkAndSendShopifyEvents=function(b){var c=a.getShopifyModule();a.log("detected shopify module:"+c);switch(c){case "collection":a.log("Inside collection view case");a.sendShopifyCollectionViewEvent();break;case "product":a.log("Inside product view case"),void 0!=b&&b?(a.log("Now listening to product view event"),a.listenToProductVariant(a.sendShopifyProductViewEvent)):a.sendShopifyProductViewEvent()}};a.rmSubsReceiver=function(b){3==b&&(a.setMDConfig(a.mdJson,a.permsDomain,b),"object"==typeof a.sourceOriginAlt&&a.mdIndex<a.sourceOriginAlt.length&&a.permsHandler(a.sourceOriginIndex,a.sourceOriginAlt.length-1,a.mdJson))};a.rmSubsInFrame=function(){var b={izootoMsg:{izrmstatus:3}},c=a.getParamFromUrl(document.location.href,"izHardUnsub");try{var d=a.getStorage("iztoken");1==c?(a.notificationUnsubscribe(),window.parent.postMessage(JSON.stringify(b),"*")):""!=d?(d=a.getBrowserKeyFromToken(d),a.sendSubscriptionUpdate(d,2,function(){window.parent.postMessage(JSON.stringify(b),"*")})):window.parent.postMessage(JSON.stringify(b),"*")}catch(e){}};a.sendPermissionStatus=function(){var b={izPermsStatus:{}};b.izPermsStatus.status=0;"Notification"in window&&(b.izPermsStatus.status="granted"==Notification.permission?1:0);window.parent.postMessage(JSON.stringify({izootoMsg:b}),"*")};a.getMDConfig=function(b,c){izmd=b;return void 0!=izmd[c]?izmd[c]:""};a.setMDConfig=function(b,c,d){b=""!=b?b:{};b[c]=d;a.mdJson=b;b=JSON.stringify(b);a.setStorage("izmd",b)};a.permsHandler=function(b,c,d){for(;b<=c;b++){a.permsDomain=a.sourceOriginAlt[b];var e=a.getMDConfig(d,a.permsDomain);a.sourceOriginIndex=b+1;if(3==e||2==e){if(b==c)break}else{a.addMsgReciever();"https:"==a.locationProtocol?a.subFrame(a.permsDomain+"?action=izrmsubs&izHardUnsub=1","izAltSubFrame"+b):a.subFrame(a.permsDomain+"?action=izrmsubs","izAltSubFrame"+b);break}}};a.rmSubs=function(){a.mdJson="";a.mdIndex=0;a.md=a.getStorage("izmd");var b=a.md;if(""!=b)try{b=JSON.parse(b),a.mdJson=b}catch(c){}"object"==typeof a.sourceOriginAlt&&1<a.sourceOriginAlt.length?a.permsHandler(0,a.sourceOriginAlt.length-1,a.mdJson):(a.permsDomain="object"==typeof a.sourceOriginAlt?a.sourceOriginAlt[0]:a.sourceOriginAlt,b=a.getMDConfig(a.mdJson,a.permsDomain),3!=b&&2!=b&&(a.addMsgReciever(),"https:"==a.locationProtocol?a.subFrame(a.permsDomain+"?action=izrmsubs&izHardUnsub=1","izAltSubFrame"):a.subFrame(a.permsDomain+
"?action=izrmsubs","izAltSubFrame")))};a.db={};a.db.instance="";a.db.addUpdate=function(b,c,d){return new Promise(function(e,f){var h=b.transaction(["options"],"readwrite").objectStore("options").put({key:c,val:d});h.onsuccess=function(k){e(c+" added to db.")};h.onerror=function(k){f("Unable to add data in db!")}})};a.db.getData=function(b,c,d){return new Promise(function(e,f){var h=b.transaction([c]).objectStore(c).get(d);h.onerror=function(k){f("Unable to retrieve data from db!")};h.onsuccess=function(k){k="";h.result?k=h.result:a.log("Not found in db!");e(k)}})};a["debugger"]={};a["debugger"].status=0;a["debugger"].successCode="color: #228B22";a["debugger"].errCode="color: #FF0000";a["debugger"].infoCode="background: #ffffcc; color: #222";a["debugger"].gcmValidator="https://api.izooto.com/validate-gcm/";a["debugger"].host=document.location.protocol+"//"+document.location.hostname;a["debugger"].log=function(b,c){c||(c="");console.info("%c"+b,c)};a["debugger"].requestFile=function(b,c,d){var e=new XMLHttpRequest,f=Math.random();b+=b.includes("?")?"&":"?";e.onreadystatechange=function(){if(4==this.readyState){var h=e.responseText,k="";e.getResponseHeader("Content-Type")?k=e.getResponseHeader("Content-Type"):e.getResponseHeader("content-type")&&(k=e.getResponseHeader("content-type"));200==this.status?c(this.status,h,k):d(this.status,h)}};e.open("GET",b+f,!0);e.send()};a["debugger"].getFileInfo=function(b,c){var d={};a["debugger"].requestFile(b,function(e,f,h){d.status=!0;d.contentType=h;d.body=f;c(d)},function(e,f){d.status=!1;c(d)})};a["debugger"].contentTypeValidator=function(b,c){var d=!0;c=c.toLowerCase();1==b?0>c.indexOf("application")&&0>c.indexOf("javascript")&&(d=!1):2==b&&0>c.indexOf("html")&&(d=!1);return d};a["debugger"].contentValidator=function(b,c){var d=!0;c.toLowerCase();1==b?0>contentType.indexOf(a["debugger"].rcvObj.workerSrc)&&(d=!1):2==b&&0>contentType.indexOf(a["debugger"].rcvObj.scriptSrc)&&(d=!1);return d};a["debugger"].validateIzootoHtml=function(b){a.debuggerObj.plugin&&b();var c=a["debugger"].msgSet;a["debugger"].getFileInfo(a.sourceOrigin,function(d){a.debuggerObj.izootoHtml=d;1==d.status?(a["debugger"].log(c.html_f,a["debugger"].successCode),a["debugger"].contentTypeValidator(2,d.contentType)||(a["debugger"].log(c.html_ct+d.contentType,a["debugger"].errCode),a["debugger"].err=1)):(a["debugger"].log(c.html_nf,a["debugger"].errCode),a["debugger"].err=1);b()})};a["debugger"].validateSw=function(b){var c=a["debugger"].msgSet,d=a["debugger"].host;a["debugger"].getFileInfo(a.serviceWorker,function(e){a.debuggerObj.sw=e;1==e.status?(a["debugger"].log(c.sw_t+c.sw_f.replace("{sw}",d+a.serviceWorker),a["debugger"].successCode),a["debugger"].contentTypeValidator(1,e.contentType)?a["debugger"].validateIzootoHtml(b):(a["debugger"].log(c.sw_ct+e.contentType,a["debugger"].errCode),a["debugger"].err=1,b())):(a["debugger"].log(c.sw_t+c.sw_nf.replace("{sw}",d+a.serviceWorker),a["debugger"].errCode),a["debugger"].err=1,b())})};a["debugger"].msgSet={code_t:"iZooto JS code: ",code_f:"found",code_nf:"missing. Learn more here: http://bit.ly/2WHcP4a",sw_t:"Service Worker JS: ",sw_f:"found at {sw}",sw_nf:"missing from {sw} , Learn more here: http://bit.ly/2K0yGSs",sw_ct:"Service Worker JS: Invalid Content-Type found ",html_f:"Izooto Html: found",html_nf:"Izooto Html: not found ",html_ct:"Izooto Html: Invalid Content-Type found ",mfst_t:"Manifest file: ",mfst_f:"found at {m}",mfst_nf:"missing form {m} , Learn more here: http://bit.ly/2K0yGSs",multi_mfst:"multiple manifest files found. Learn more here: http://bit.ly/2WCd2FC",gcm_t:"gcm_sender_id: ",gcm_nf:"missing in the manifest file. Learn more here: http://bit.ly/2WCd2FC",fallback:"FCM project: issue with your FCM project.",integration:"iZooto integration is working fine on your website.",integration_f:"iZooto integration is incomplete. Contact support@izooto.com to get assistance.",plugin:"You have integrated iZooto using the {plg} plugin.",ev:"sent to iZooto"};a["debugger"].validateGCM=function(b,c){a.httpRequest(a["debugger"].gcmValidator,function(d){var e="fail";try{d=JSON.parse(d)}catch(h){}var f=d.response?d.response:"Something went wrong";"success"==d.status?(e=d.status,a["debugger"].log("GCM Sender ID Validation "+e,a["debugger"].successCode),c(!0)):(a["debugger"].log("GCM Sender ID Validation "+e+" , "+f,a["debugger"].errCode),c(!1))},{},{method:"post",data:"pid="+a.client+("&gcm="+b)})};a["debugger"].validateManifest=function(b){for(var c="",d=a["debugger"].msgSet,e=a["debugger"].host,f=document.getElementsByTagName("link"),h=0;h<f.length;h++){var k=f[h],l=k.getAttribute("href");k=k.getAttribute("rel");null!=k&&"manifest"==k&&l!=a.manifest&&(a["debugger"].log(d.mfst_t+d.multi_mfst,a["debugger"].errCode),a["debugger"].err=1)}a["debugger"].requestFile(a.manifest,function(m,n){a["debugger"].log(d.mfst_t+d.mfst_f.replace("{m}",e+a.manifest),a["debugger"].successCode);try{c=JSON.parse(n),c=c.gcm_sender_id?c.gcm_sender_id:"",""==c?(a["debugger"].log(d.gcm_t+d.gcm_nf,a["debugger"].errCode),b(!1)):a["debugger"].validateGCM(c,b)}catch(p){a["debugger"].log(d.gcm_t+d.gcm_nf.replace("{m}",e+a.manifest),a["debugger"].errCode)}},function(m,n){a["debugger"].log(d.mfst_t+d.mfst_nf.replace("{m}",e+a.manifest),a["debugger"].errCode);b(!1)})};a["debugger"].getScript=function(){for(var b=document.getElementsByTagName("script"),c=/cdn.izooto.com\/scripts\/[^\/]*.js/,d=0;d<b.length;d++){var e=b[d];e=e.getAttribute("src");if(null!=e&&c.test(e))return e.startsWith("//")&&(e="https:"+e),e}return null};a["debugger"].showMsgOverlay=function(){try{var b=document.getElementsByTagName("body")[0],c=document.createElement("div");c.setAttribute("id","iz-integration-overlay");c.innerHTML='<div class="iz-verification-overlay" style="width: 100%;position: fixed;top: 0;left:0;z-index: 9999999999;text-align: center;background: rgba(0,0,0,0.6);height: 100%;color: #fff;display: flex;justify-content: center;align-items: center;overflow-y: hidden;"><div class="inner-content" style="font-size: 2em;"><span style="line-height: 2;">Please wait while we are verifying iZooto integration on your website. <br>This window will close automatically.</span></div></div>';b.appendChild(c)}catch(d){}};a["debugger"].init=function(b){a.debuggerObj.sw={};a.debuggerObj.izootoHtml={};a["debugger"].err=0;var c=a["debugger"].msgSet;console.clear();a["debugger"].log("-".repeat(20)+"iZooto Debug Mode"+"-".repeat(20));a["debugger"].status=1;a["debugger"].log("Verifying iZooto integration on your website",a["debugger"].infoCode);var d=function(){1==a["debugger"].err?a["debugger"].log(c.integration_f,a["debugger"].errCode):a["debugger"].log(c.integration,a["debugger"].successCode);b&&b(a.debuggerObj)},e=a.platform;a.debuggerObj.plugin=e;a["debugger"].rcvObj={};var f=a.getParamFromUrl(document.location.href,"izObj");try{f=JSON.parse(f),void 0!=f.domainRoot&&(a.domainRoot=f.domainRoot,a.httpsNoRoot=""!=a.domainRoot?1:0,a.pathSetup())}catch(h){}""!=e&&a["debugger"].log(c.plugin.replace("{plg}",e),a["debugger"].successCode);e=a["debugger"].getScript();null!=e?(a.debuggerObj.scriptSrc=e,a["debugger"].log(c.code_t+c.code_f+"("+e+")",a["debugger"].successCode),1==a.isSdkHttps?a["debugger"].validateSw(function(){d()}):d()):(a["debugger"].err=1,a["debugger"].log(c.code_t+c.code_nf,a["debugger"].errCode),d())};a.db.init=function(b){return new Promise(function(c,d){""!=a.db.instance&&c(a.db.instance);var e=indexedDB.open("izooto",2);e.onerror=function(f){d("DB not load")};e.onsuccess=function(f){a.db.instance=e.result;a.log("success:: "+a.db.instance);c(a.db.instance)};e.onupgradeneeded=function(f){f=f.target.result;f.createObjectStore("options",{keyPath:"key"});f.createObjectStore("swEvents",{keyPath:"eventName"})}})};a.noRootVersionHandler=function(){a.db.init().then(function(b){a.db.addUpdate(b,"noRootAllowed",1).then(function(c){a.log(c)})["catch"](function(c){a.log(c)})})["catch"](function(b){a.log(b)})};a.setIndexedDb=function(b){"gaId"==b&&1!=a.ga.swEvents||"sysEvents"==b&&1!=a.sysEventsFlag?a.log(b+" :: not saved"):a.db.init().then(function(c){a.db.getData(c,"options",b).then(function(d){((a.dd=d)&&!d.hasOwnProperty("val")||d.val!=a[b])&&a.db.addUpdate(c,b,a[b]).then(function(e){a.log(e)})["catch"](function(e){a.log(e)})})["catch"](function(d){a.log(d)})})["catch"](function(c){a.log(c)})};a.fixForSubscribers=function(){navigator.serviceWorker.ready.then(function(b){b.pushManager.getSubscription().then(function(c){var d=a.getStorage("iztoken");d=a.getBrowserKeyFromToken(d);var e=c.endpoint;(0<=e.indexOf("fcm.googleapis.com")?e.substring(36):e.substring(40))!=d&&(a.forceTokenSync=1,a.subscriptionType="default",a.setStorage("iztoken",JSON.stringify(c)),a.sendSubscriptionToServer(c))})})};a.customSubscription=function(){try{if("object"==typeof window._izq)for(var b=window._izq.length,c=0;c<b;c++)if(window._izq[c][0]&&"epSyncState"==window._izq[c][0]&&1==window._izq[c][1])return a.processQueue(),!0;return!1}catch(d){}};a.sendLocalNotification=function(b){return navigator.serviceWorker.ready.then(function(c){var d={};d.pid=b.key;d.link=b.link;d.cid=b.id;d.rid=b.rid;d.viewFlag=b.viewFlag;d.clickFlag=b.clickFlag;d.sysEvents=b.sysEvents;d.domainNum=b.domainNum;var e={body:b.message,icon:b.icon,requireInteraction:b.reqInt,tag:b.tag,image:b.banner,data:d};if(0<b.act_num&&b.act1name&&b.act1link){var f={action:"action1",title:b.act1name};b.hasOwnProperty("act1icon")&&""!=b.act1icon&&(f.icon=b.act1icon);d.act1link=b.act1link;var h=[f];2==b.act_num&&b.act2name&&b.act2link&&(h={action:"action2",title:b.act2name},b.hasOwnProperty("act2icon")&&""!=b.act2icon&&(h.icon=b.act2icon),d.act2link=b.act2link,h=[f,h]);e.actions=h}return c.showNotification(b.title,e)})};a.tabAbandonment.run=function(){a.tabAbandonment.reset();a.log("tabAbandonment :: init");var b={};b.url=window.location.href;a.setizConfig("tabAbandonment",JSON.stringify(b))};a.tabAbandonment.onBlur=function(){a.tabAbandonment.focused=!1;a.tabAbandonment.run();a.tabAbandonment.timerInstance=setInterval(function(){var b=a.getizConfig("tabAbandonment");a.tabAbandonment.counter++;try{b=JSON.parse(b)}catch(c){b={}}a.log("tabAbandonment counter:: "+a.tabAbandonment.counter);b.url!=window.location.href?a.tabAbandonment.reset():a.tabAbandonment.counter==a.tabAbandonment.timeout&&(a.tabAbandonment.pushNotification(),a.tabAbandonment.reset())},1E3);a.log("ta :: blurred")};a.tabAbandonment.onFocus=function(){a.tabAbandonment.focused=!0;a.tabAbandonment.reset();a.log("ta:: focused")};a.tabAbandonment.reset=function(){a.log("tabAbandonment :: timer reset");a.tabAbandonment.counter=0;clearInterval(a.tabAbandonment.timerInstance)};a.tabAbandonment.syncView=function(b){var c={pid:b.key,bkey:a.currentToken,cid:b.id,rid:b.rid,op:"view",pl:1};1==b.viewFlag&&(b=a.parseEpConf("syncNotificationView"),a.httpRequest(b,function(){},{"Content-Type":"application/x-www-form-urlencoded"},{method:"post",data:Object.keys(c).map(function(d){return d+"="+c[d]}).join("&")}))};a.tabAbandonment.pushNotification=function(){var b=a.tabAbandonment.pushTimeout,c=a.tabAbandonment.getPayload();if(""!=c.id&&""!=c.rid){var d=a.getIzSync("tabAbandonmentPush"),e=a.getTimeDiff(d,!0);""!=d&&e<b?a.tabAbandonment.reset():a.sendLocalNotification(c).then(function(){a.setIzSync("tabAbandonmentPush");a.tabAbandonment.syncView(c)})}};a.tabAbandonment.getPayload=function(){var b={};b.key=a.client;b.title="You were reading <~[@article_title]~>";b.message="Pick up where you left off";b.icon="https://cdnimg.izooto.com/icons/4/JD-12-128.png";b.banner="<~[@featured_image]~>";b.link="<~[@last_visited_url]~>";b.tag="tabAbandonment";b.reqInt=!0;b.id="";b.rid="";b.viewFlag=1;b.clickFlag=1;b.sysEvents=0;b.domainNum=0;var c=window.location.href;0>c.indexOf("utm_campaign=")&&(b.link+=c.includes("?")?"&":"?",b.link+="utm_source=izooto&utm_medium=push_notifications&utm_campaign=recover_abandoned_tab&utm_term=notification1");c=a.tabAbandonment.data;for(var d in b)c.hasOwnProperty(d)||(c[d]=b[d]);return c=a.tabAbandonment.getFilterData(c)};a.tabAbandonment.urlUtmHandler=function(b,c){var d=c.split("&"),e={},f;for(f in d)c=d[f].split("="),e[c[0]]=c[1];b=new URL(b);for(var h in e)b.searchParams.set(h,e[h]);return b.href};a.tabAbandonment.getFilterData=function(b){var c={},d=window.location.href;c.article_title=""!=a.getMetaValue("og:title")?a.getMetaValue("og:title"):a.getMetaValue("title");c.featured_image=a.getMetaValue("og:image");c.last_visited_url=d;for(var e in b)if("string"==typeof b[e]&&0<=b[e].indexOf("<~[@")){var f=b[e].indexOf("<~[@"),h=b[e].indexOf("]~>");f=b[e].substring(f+4,h);"last_visited_url"==f&&0<b[e].indexOf("utm_campaign")?(h=b[e].split("?"),b[e]=h[0],h=h[1],b[e]=b[e].replace("<~[@"+f+"]~>",c[f]),b[e]=a.tabAbandonment.urlUtmHandler(d,h)):b[e]=b[e].replace("<~[@"+f+"]~>",c[f])}return b};a.tabAbandonment.init=function(){a.log("tabAbandonment init");a.tabAbandonment.timerInstance=0;a.tabAbandonment.focused=!0;1==a.tabAbandonment.status&&(a.tabAbandonment.interval=setInterval(function(){if(document.hasFocus()){if(!a.tabAbandonment.focused)a.tabAbandonment.onFocus()}else if(a.tabAbandonment.focused)a.tabAbandonment.onBlur()},1E3))};a.videoPlaybook=void 0!==g.videoPlaybook&&""!==g.videoPlaybook?g.videoPlaybook:{};a.videoPlaybook.status=void 0!==a.videoPlaybook.status&&""!==a.videoPlaybook.status?a.videoPlaybook.status:0;a.videoPlaybook.allowedUrls=void 0!==a.videoPlaybook.allowedUrls?a.videoPlaybook.allowedUrls:[];a.videoPlaybook.ytPlayerReference=[];a.videoPlaybook.playerState=[];a.videoPlaybook.syncTrigger=function(b,c){window._izq.push(["trigger",b,c])};a.videoPlaybook.sendToApi=function(b){var c=0,d=a.videoPlaybook.playerState;if(0==d.length)d.push(b);else{for(var e=0;e<d.length;e++)if(d[e].playerId==b.playerId){if(d[e].status==b.status)return;d[e]=b;c=1;break}c||d.push(b)}c={player_id:b.playerId,title:b.title,url:b.url,player:b.player_type,duration:b.duration.toString()};b.hasOwnProperty("thumbnail")&&(c.thumbnail=b.thumbnail);try{"started"==b.status?a.videoPlaybook.syncTrigger("video_started",c):"ended"==b.status&&a.videoPlaybook.syncTrigger("video_completed",{playerid:b.playerId})}catch(f){}a.log("Video Payload",c)};a.videoPlaybook.html5Payload=function(b,c){var d=[];d.status=void 0===b?"started":b;d.playerId=c.id;d.title=document.title;d.url=location.href;d.player_type="html5";d.duration=c.duration;a.videoPlaybook.sendToApi(d)};a.videoPlaybook.html5Handler=function(){var b=document.querySelectorAll("video");b&&b.forEach(function(c){if(!c.id){var d=a.videoPlaybook.generateRandomString("iz-video-",7);c.setAttribute("id",d)}c.onplay=function(){a.videoPlaybook.html5Payload("started",c)};c.onended=function(){a.videoPlaybook.html5Payload("ended",c)}})};a.videoPlaybook.ytPayload=function(b,c){var d=[];d.status=void 0===b?"started":b;d.playerId=c.getIframe().id;d.title=c.playerInfo.videoData.title||document.title;d.thumbnail="https://img.youtube.com/vi/"+c.playerInfo.videoData.video_id+"/0.jpg";d.url=location.href;d.player_type="youtube";d.duration=c.playerInfo.duration;a.videoPlaybook.sendToApi(d)};a.videoPlaybook.isValidYtUrl=function(b){return/^https:\/\/(?:www.)?youtube.com\/embed\/[A-z0-9]+/.test(b)};a.videoPlaybook.initYtPlayer=function(b){if(typeof YT)return YT.get(b)?(b=YT.get(b),b.addEventListener("onStateChange",a.videoPlaybook.onYtPlayerStateChange),b):new YT.Player(b,{events:{onStateChange:a.videoPlaybook.onYtPlayerStateChange}})};a.videoPlaybook.onYtPlayerStateChange=function(b){switch(b.data){case YT.PlayerState.PLAYING:a.videoPlaybook.ytPayload("started",b.target);break;case YT.PlayerState.ENDED:a.videoPlaybook.ytPayload("ended",b.target)}};a.videoPlaybook.fixPlayerReference=function(b){setInterval(function(){for(i=0;i<b.length;i++){var c=b[i].getIframe(),d=a.videoPlaybook.getClosureKeyName(b[i]);b[i][d]!==YT.get(c.id)[d]&&(b[i]=YT.get(c.id),b[i].addEventListener("onStateChange",a.videoPlaybook.onYtPlayerStateChange))}},1E3)};a.videoPlaybook.fixYtEnableJsApi=function(b){var c=new URL(b.src);""==a.getParamFromUrl(b.src,"enablejsapi")?(c.searchParams.set("enablejsapi",1),b.setAttribute("src",c)):null==a.getParamFromUrl(b.src,"enablejsapi")&&(c.searchParams.append("enablejsapi",1),b.setAttribute("src",c))};a.videoPlaybook.generateRandomString=function(b,c){c=void 0===c?7:c;return(void 0===b?"":b)+Math.random().toString(36).substring(c)};a.videoPlaybook.isJsApiEnabled=function(b){return null==a.getParamFromUrl(b,"enablejsapi")?!1:!0};a.videoPlaybook.getClosureKeyName=function(b){try{for(var c in b)if(-1!=c.search("closure_"))return c.toString()}catch(d){throw Error("Please update keyName of player");}};a.videoPlaybook.addYTApiScirptPromise=function(){return new Promise(function(b,c){var d=setInterval(function(){"object"===typeof YT&&"function"===typeof YT.get&&(clearInterval(d),b(!0))},1E3);if("undefined"!==typeof YT)b(!0);else{var e=document.createElement("script");e.src="//www.youtube.com/player_api";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f)}})};a.videoPlaybook.ytHandler=function(){setInterval(function(){var b=document.querySelectorAll("iframe[src*='https://www.youtube.com/embed/']");for(i=0;i<b.length;i++)if(a.videoPlaybook.isValidYtUrl(b[i].src)&&!b[i].hasAttribute("izplayer")){b[i].setAttribute("izplayer","1");if(!b[i].id){var c=a.videoPlaybook.generateRandomString("iz-video-",7);b[i].setAttribute("id",c)}if(a.videoPlaybook.isJsApiEnabled(b[i].src))(function(e){var f=setInterval(function(){try{var h=YT.get(b[e].id);h&&(clearInterval(f),h.addEventListener("onStateChange",a.videoPlaybook.onYtPlayerStateChange),a.videoPlaybook.ytPlayerReference.push(h))}catch(k){}},1E3)})(i);else{var d=b[i];a.videoPlaybook.fixYtEnableJsApi(d);a.videoPlaybook.addYTApiScirptPromise().then(function(){var e=a.videoPlaybook.initYtPlayer(d.id);a.videoPlaybook.ytPlayerReference.push(e)})}}a.videoPlaybook.fixPlayerReference(a.videoPlaybook.ytPlayerReference)},1E3)};a.videoPlaybook.detectPlayer=function(){a.videoPlaybook.html5Handler();a.videoPlaybook.ytHandler()};a.videoPlaybook.isMatchingWith=function(b){if(0==b.length)return 1;for(var c=0;c<b.length;c++)if(-1!=document.location.href.search(b[c]))return 1;return 0};a.videoPlaybook.init=function(){a.videoPlaybook.status&&a.videoPlaybook.isMatchingWith(a.videoPlaybook.allowedUrls)&&a.videoPlaybook.detectPlayer()};a.initIzooto=function(){if(1===a.izootoStatus&&!a.customSubscription())if(a.currentToken=a.getBrowserKeyFromToken(a.getStorage("iztoken")),a.isFirefox&&!a.isSubDomain&&"https:"==a.locationProtocol&&72<=a.browserVer&&(a.promptType=1,""==a.optInDesignType&&(a.optInDesignType=1)),2==a.isSubDomain&&self!=top)a.rmSubsInFrame();else if(4==a.isSubDomain&&self!=top)a.sendPermissionStatus();else if(5==a.isSubDomain&&self==top)a["debugger"].showMsgOverlay(),a["debugger"].init(function(c){a.sendMessage("integrationObj",c,"opener");setTimeout(function(){window.close()},1500)});else{if(!a.isSubDomain&&a.autoPrompt){try{if(window.self!=window.top){a.processQueue();return}}catch(c){}if(""!=a.allowedDomain&&0>a.allowedDomain.indexOf(a.locationProtocol+"//"+document.location.hostname)&&!a.isSubDomain)return;1==a.enableEnricher&&""!=a.enricherSrc&&a.loadEnricher();0==a.isShopify||a.isSubDomain||a.shopifyFix();a.detectAutoPrompt()}a.processQueue();if(1!=a.promptType||a.isSubDomain||!a.isSdkHttps||"https:"!=a.locationProtocol||!a.isNotification||"default"!=Notification.permission||a.calledManually||a.isSafari){if(!a.autoPrompt||a.isSubDomain||a.isReSubscribe||!a.getStorage("izDl")||!("https:"==a.locationProtocol&&a.isSdkHttps&&a.isNotification&&"default"==Notification.permission||"http:"==a.locationProtocol&&!a.getStorage("iztoken")))if(a.isSafari){if(""==a.masterDomain||window.location.origin==a.masterDomain)"complete"===document.readyState?(a.log("DOM has already loaded, Checking safari in 0.30 seconds"),setTimeout(function(){a.checkSafariPermission()},300)):window.addEventListener("load",function(){a.log("DOM has loaded now, checking in 0.3 secs");setTimeout(function(){a.checkSafariPermission()},300)},!1)}else a.isChrome&&("http:"==a.locationProtocol||"serviceWorker"in navigator)?1==a.incognitoChecked?a.startSubscription("chrome"):a.incog(function(c){c?a.pixelEventReciever("browser",!1):a.startSubscription("chrome")}):a.isFirefox&&("http:"==a.locationProtocol||"serviceWorker"in navigator||1==a.isSubDomain)?(b=indexedDB.open("test"),b.onerror=function(){},b.onsuccess=function(){a.startSubscription("firefox")}):a.isOpera?1==a.incognitoChecked?a.startSubscription("opera"):a.incog(function(c){c?a.pixelEventReciever("browser",!1):a.startSubscription("opera")}):a.isEdge&&"serviceWorker"in navigator&&a.isNotification?(window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent)&&a.startSubscription("edge"):a.pixelEventReciever("browser",!1)}else if(a.autoPrompt=!1,"serviceWorker"in navigator&&(a.isChrome||a.isFirefox||a.isAddFcm))if(a.isChrome||a.isOpera)a.incog(function(c){c?a.pixelEventReciever("browser",!1):a.optinDialog()});else if(a.isEdge)(window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent)&&a.optinDialog();else if(a.isFirefox){var b=indexedDB.open("test");b.onerror=function(){};b.onsuccess=function(){a.optinDialog()}}else a.optinDialog();else a.pixelEventReciever("browser",!1)}};a.loadOptin=function(){a.defaultOptinDesign="<style>@-webkit-keyframes izootobounceInDown{60%, 75%, 90%, from, to{-webkit-animation-timing-function: cubic-bezier(.215, .61, .355, 1) ; animation-timing-function: cubic-bezier(.215, .61, .355, 1);}0%{opacity: 0 ; -webkit-transform: translate3d(-50%, -3000px, 0) ; transform: translate3d(-50%, -3000px, 0);}60%{opacity: 1 ; -webkit-transform: translate3d(-50%, 25px, 0) ; transform: translate3d(-50%, 25px, 0);}75%{-webkit-transform: translate3d(-50%, -10px, 0) ; transform: translate3d(-50%, -10px, 0);}90%{-webkit-transform: translate3d(-50%, 5px, 0) ; transform: translate3d(-50%, 5px, 0);}to{-webkit-transform: translate3d(-50%, 0, 0) ; transform: translate3d(-50%, 0, 0);}}@keyframes izootobounceInDown{60%, 75%, 90%, from, to{-webkit-animation-timing-function: cubic-bezier(.215, .61, .355, 1) ; animation-timing-function: cubic-bezier(.215, .61, .355, 1);}0%{opacity: 0 ; -webkit-transform: translate3d(-50%, -3000px, 0) ; transform: translate3d(-50%, -3000px, 0);}60%{opacity: 1 ; -webkit-transform: translate3d(-50%, 25px, 0) ; transform: translate3d(-50%, 25px, 0);}75%{-webkit-transform: translate3d(-50%, -10px, 0) ; transform: translate3d(-50%, -10px, 0);}90%{-webkit-transform: translate3d(-50%, 5px, 0) ; transform: translate3d(-50%, 5px, 0);}to{-webkit-transform: translate3d(-50%, 0, 0) ; transform: translate3d(-50%, 0, 0);}}#izooto-subscription-prompt .izanimated{-webkit-animation-duration: 1s ; animation-duration: 1s ; -webkit-animation-fill-mode: both ; animation-fill-mode: both ;}#izooto-subscription-prompt .iz_prompt_containr{webkit-animation-name: izootobounceInDown ; animation-name: izootobounceInDown ; webkit-animation-duration: .8s ; animation-duration: .8s ; -webkit-animation-fill-mode: none ; animation-fill-mode: none ; position: fixed ; top: 0 ; left: 50% ; background: #f9f9f9 ; width: 430px ; height: auto ; padding: 0px 0 ; border-radius: 0 0 4px 4px ; font-family: 'Open Sans', sans-serif ; z-index: 9999999999 ; box-shadow: 0 0 30px rgba(0, 0, 0, .1) ; transform: translate(-50%, 0) ; border: 1px solid #e6e6e6 ; padding-bottom: 6px ;}#izooto-subscription-prompt .prompt_continer_pdng .iz_img_container{float: left ; width: 17% ; height: 100% ; padding-left: 10px}#izooto-subscription-prompt .iz_text_container .izooto-dialog-text{overflow: hidden ; text-overflow: ellipsis ; word-wrap: break-word ; color: #5a5a5a ; font-size: 14px ; font-weight: 700 ; line-height: 1.4em ; margin-bottom: 8px ; display: -webkit-box ; -webkit-line-clamp: 2 ; max-height: 42px ; -webkit-box-orient: vertical ; text-align: left}#izooto-subscription-prompt .prompt_continer_pdng .iz_text_container{width: 80% ; float: right ; color: #fff ; text-align: left;}#izooto-subscription-prompt .iz_text_container .iz_description{text-align: left; line-height: 16px; word-wrap: break-word ; text-overflow: ellipsis ; max-height: 30px ; display: -webkit-box ; -webkit-line-clamp: 2 ; -webkit-box-orient: vertical ; overflow: hidden ; word-wrap: break-word ; color: #878484 ; font-weight: 400 ; font-size: 12px ;}#izooto-subscription-prompt .iz_prompt_containr .iz_buttons_container{padding-top: 10px ; padding-right: 10px ; text-align: right ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button{white-space: nowrap; background: #0e53a1 ; display: inline-block ; text-align: center ; vertical-align: middle ; line-height: 1 ; font-size: 12px ; letter-spacing: 1px ; min-width: 85px ; max-width: 120px ; cursor: pointer ; background-image: none ; color: #fff ; padding: 10px 5px ; text-overflow: ellipsis ; border-radius: 4px ; overflow: hidden; text-decoration: none ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button:hover{background: #2973c5 ; color: #fff ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button{margin: 6px ; white-space: nowrap; overflow: hidden; border: 1px solid #bdbdbd ; color: grey ; display: inline-block ; text-align: center ; vertical-align: middle ; line-height: 1 ; font-size: 12px ; letter-spacing: 1px ; min-width: 85px ; max-width: 120px ; cursor: pointer ; background-image: none ; background: 0 0 ; padding: 10px 5px ; text-overflow: ellipsis ; border-radius: 4px ; text-decoration: none ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button:hover{color: #fff ; background: #bbb ;}#izooto-subscription-prompt .iz_prompt_containr .izbranding{width: auto; margin-right: 8px ; margin-bottom: -2px; float: right ;}#izooto-subscription-prompt .iz_prompt_containr .prompt_continer_pdng{width: 100%; padding: 10px 0px ; float: left ;}#izooto-subscription-prompt .iz_prompt_containr .pwrd-img{padding-left: 10px ; float: left ; margin-top: 2.6% ;}#izooto-subscription-prompt .iz_prompt_containr .d-display{display: block ;}#izooto-subscription-prompt .iz_prompt_containr .m-display{display: none ;}@media screen and (max-width:500px){#izooto-subscription-prompt .iz_prompt_containr .d-display{display: none ;}#izooto-subscription-prompt .iz_prompt_containr .m-display{display: block ;}#izooto-subscription-prompt .iz_text_container .izooto-dialog-text{font-size: 15px ; line-height: 20px ;}#izooto-subscription-prompt .iz_text_container .iz_description{line-height: 16px; font-size: 13px ; max-height: 30px ;}#izooto-subscription-prompt .iz_buttons_container a.iz_allow_button{font-weight: 600; min-width: 80px ; max-width: 100px ; white-space: nowrap ; overflow: hidden ; font-size: 12px ;}#izooto-subscription-prompt .iz_buttons_container a.iz_block_button{font-weight: 600; min-width: 80px ; max-width: 100px ; white-space: nowrap ; overflow: hidden ; font-size: 12px ;}#izooto-subscription-prompt .iz_prompt_containr{position: fixed ; top: auto ; bottom: 0px ; width: 100% ; padding: 10px 0 ; padding-bottom: 4px ;}#izooto-subscription-prompt .prompt_continer_pdng .iz_img_container{padding-left: 10px}#izooto-subscription-prompt .prompt_continer_pdng .iz_text_container{padding-right: 10px ; width: 74% ;}}@media only screen and (max-width: 800px) and (min-width: 601px){#izooto-subscription-prompt .iz_prompt_containr{webkit-animation-name: izootobounceInDown ; animation-name: izootobounceInDown ; webkit-animation-duration: .8s ; animation-duration: .8s ; -webkit-animation-fill-mode: none ; animation-fill-mode: none ; position: fixed ; top: 0 ; left: 50% ; background: #f9f9f9 ; width: 430px ; height: auto ; padding: 0px 0 ; border-radius: 0 0 4px 4px ; font-family: 'Open Sans', sans-serif ; z-index: 9999999999 ; box-shadow: 0 0 30px rgba(0, 0, 0, .1) ; transform: translate(-50%, 0) ; border: 1px solid #e6e6e6 ; padding-bottom: 6px ;}}</style><div id='izooto-subscription-prompt'> <div class='iz_prompt_containr izanimated izootobounceInDown'> <div class='prompt_continer_pdng izooto-inline'> <div class='iz_img_container'><img class='iz_img' src='{{--icon--}}' width='60' height='60'></div><div class='iz_text_container'> <div class='izooto-dialog-text'>{{--message--}}</div><div class='iz_description'>{{--subMessage--}}</div></div></div><div style='width: 100%;'> <a href='{{--poweredbysrc--}}' target='_blank' class='pwrd-img iz-powered-by d-display'><img src='https://cdnimg.izooto.com/optin/120x20-grey.png' class='izbranding'></a> <div class='iz_buttons_container'> <a onclick='_izooto.openPopup();' href='javascript:void(0)' class='iz_allow_button'>{{--btn2Txt--}}</a> <a onclick='_izooto.closeDialog();' href='javascript:void(0)' class='iz_block_button'>{{--btn1Txt--}}</a> </div><a href='{{--poweredbysrc--}}' target='_blank' class='pwrd-img2 iz-powered-by m-display'><img src='https://cdnimg.izooto.com/optin/120x20-grey.png' class='izbranding'></a></div></div></div>";1===a.promptType&&(void 0!=window.izOptinDesign&&(a.optInDesign=window.izOptinDesign),a.dialogDesign=""!=a.optInDesign?a.optInDesign:a.defaultOptinDesign,a.dialogDesign=a.loadDesign(a.promptDesign,a.dialogDesign))};a.customizeOptInPrompt=function(b){var c={title:50,message:100,allowButton:10,laterButton:10};try{for(var d in b)""!=b[d]&&((b[d]=b[d].trim(),"title"==d)?a.promptDesign.message=b[d].substring(0,c[d]):"message"==d?a.promptDesign.subMessage=b[d].substring(0,c[d]):"icon"!=d||!b[d].startsWith("http://")&&!b[d].startsWith("https://")||b[d].includes("panel.izooto")?"allowButton"==d?a.promptDesign.btn2Txt=b[d].substring(0,c[d]):"laterButton"==d&&(a.promptDesign.btn1Txt=b[d].substring(0,c[d])):a.promptDesign.icon=b[d])}catch(e){a.log(e)}};a.optinCallback=function(b){"function"==typeof b&&(a.optinModule=new b,void 0!=a.optinModule.data&&(window.izOptinDesign=a.optinModule.data),a.openDialog(!0))};a.masterCallback=function(b){if(b){if(""!=a.masterDomain&&(b=a.getMasterStorage("bkey"),""==b||a.getBrowserKeyFromToken(JSON.stringify(b))!=a.getBrowserKeyFromToken(a.getStorage("iztoken")))){if(window.location.origin==a.masterDomain)b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+a.masterDomain+'","user_properties":{}}}',a.setStorage("izooto",b);else if(self==top){b={};b.subscribed_on=window.location.origin;b.token=a.getStorage("iztoken");var c=document.getElementById("izMasterDomainFramePerms");a.sendMessage("izMasterToFrame",b,c);b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+
window.location.origin+'","user_properties":{}}}';a.setStorage("izooto",b)}window._izq=window._izq||[];window._izq.push(["userProfile",{add:{subscribed_on_url:window.location.origin}}])}}else""!=a.masterDomain&&(window.location.origin==a.masterDomain?(b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+a.masterDomain+'","user_properties":{}}}',a.setStorage("izooto",b)):self==top&&(b={},b.subscribed_on=window.location.origin,b.token=a.getStorage("iztoken"),c=document.getElementById("izMasterDomainFramePerms"),a.sendMessage("izMasterToFrame",b,c),b='{"iz_'+a.client+'":{"bkey":'+a.getStorage("iztoken")+',"subscribed_on":"'+window.location.origin+'","user_properties":{}}}',a.setStorage("izooto",b)),window._izq=window._izq||[],window._izq.push(["userProfile",{add:{subscribed_on_url:window.location.origin}}]))};a.masterConfigReciver=function(b){var c=b.token;""!=c?a.validateTokenMaster(a.getBrowserKeyFromToken(JSON.stringify(c)),function(d){try{if(void 0!==d.status)if(1===d.status){a.setIzstatus(1);var e='{"iz_'+
a.client+'":{"bkey":'+JSON.stringify(b.token)+',"subscribed_on":"'+b.subscribed_on+'","user_properties":{}}}';a.setStorage("izooto",e);a.setStorage("iztoken",JSON.stringify(b.token));a.processQueue()}else 0===d.status&&(a.removeStorage("izstatus"),a.initIzooto())}catch(f){}}):a.initIzooto()};a.getMasterStorage=function(b){var c="iz_"+a.client,d="";try{d=JSON.parse(a.getStorage("izooto"));var e=d[c]}catch(f){}return""==d||void 0==e?"":void 0!=e[b]?e[b]:""};a.masterDomainHandler=function(){1==a.getStorage("izstatus")?a.processQueue():(a.addMsgReciever(),a.subFrame(window._izooto.masterDomain+window._izooto.masterDomainPath+"?action=izcheckmaster&domain="+window.location.origin,"izMasterDomainFramePerms"))};a.setMasterStorage=function(b){a.setStorage("izooto",'{"iz_'+a.client+'":{"bkey":'+b.token+',"subscribed_on":"'+b.subscribed_on+'","user_properties":{}}}');a.setStorage("iztoken",b.token)};a.validateTokenMaster=function(b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=d.responseText;a.log(e);try{e=JSON.parse(e),void 0!=c&&c(e)}catch(f){}}};d.open("GET",a.ssUrl+"?s=1&bkey="+b+"&pid="+a.client,!0);a.log("validate token");d.send()};a.initMaster=function(){if(a.isChrome||a.isFirefox)if(3==a.isSubDomain&&self!=top){if(a.getStorage("izooto")){var b=a.getMasterStorage("bkey"),c=a.getMasterStorage("subscribed_on"),d={};d.token=b;d.subscribed_on=c}else d={token:"",subscribed_on:""};a.sendMessage("izMasterToParent",d,"parent");a.addMsgReciever()}else window.location.origin==a.masterDomain?(b=a.getMasterStorage("bkey"),""!=b?(c=a.getMasterStorage("subscribed_on"),c==a.masterDomain?a.initIzooto():1==a.getStorage("izstatus")?a.processQueue():a.validateTokenMaster(a.getBrowserKeyFromToken(JSON.stringify(b)),function(e){1==e.status?a.processQueue():a.initIzooto()})):a.initIzooto()):a.masterDomainHandler();else window._izooto.initIzooto()};a.setIzcidDb=function(b){a.db.init().then(function(c){a.db.addUpdate(c,"IZCID",b).then(function(d){a.log(d)})["catch"](function(d){a.log(d)})})["catch"](function(c){a.log(c)})};a.getIzCidPromise=function(){return new Promise(function(b,c){var d=window._izooto.getizConfig("IZCID"),e=a.getIzSync("IZCID",1);""==d||1!=e?(a.addMsgReciever(),window._izooto.setCookieGlobalID(),d=window._izooto.getizConfig("IZCID"),""!=d?b(d):setTimeout(function(){b(d);a.setIzcidDb(d)},2500)):(b(d),a.setIzcidDb(d))})};1!=a.deviceType&&1==a.izootoStatus?(1==a.isChrome&&62<parseInt(a.browserVer)&&a.isSdkHttps&&(a.branding=0),a.izootoStatus=1==a.mobileAllowed?1:0):1==a.deviceType&&1==a.izootoStatus&&(a.izootoStatus=1==a.desktopAllowed?1:0)};(function(g){"object"!==typeof g?console.log("Izooto:: pixel configuration not found."):(window._izq=window._izq||[],window._izooto=new Izooto(g),window._izooto.checkAlternates(),_izooto.getIzCidPromise().then(function(a){""!=_izooto.masterDomain?window._izooto.initMaster():window._izooto.initIzooto()})["catch"](function(a){""!=_izooto.masterDomain?window._izooto.initMaster():window._izooto.initIzooto()}))})(window.izConfig);